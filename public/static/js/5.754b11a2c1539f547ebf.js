webpackJsonp([5],{"0Pau":function(t,e){},Tl9G:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("PJh5"),r=i.n(a);r.a.locale("id");var n={name:"crud-bpjs-tk-bills",data:function(){return{mainKey:1,isAlertShow:!1,isLoadingPremi:!1,isAvailablePremi:!1,isAvailablePeriod:!1,isLoadingPeriod:!1,firstForm:{periode_month:null},momentFormat:{stringify:function(t){return t?r()(t).format("MMMM YYYY"):""},parse:function(t){return t?r()(t,"MMMM YYYY").toDate():null}},config:{title:"Iuran BPJS Tenaga Kerja",model_api:"bpjs-tk-bills",getter:"bpjs-tk-bills",setter:"bpjs-tk-bills",pk_field:null,permission:{create:"create-bpjs-tk-bills",read:"view-bpjs-tk-bills",update:"update-bpjs-tk-bills",delete:"delete-bpjs-tk-bills"},slave:[{name:"Rincian Iuran",permission:"view-bpjs-tk-bill-details",module:"bpjs/bpjs-tk-bill-details",as_param:"bpjs_tk_bill_id",key_field:"id"}],fields:[{id:"id",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"updated_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_at",label:"Dibuat",methods:{create:!1,update:!1,filter:!1}},{id:"updated_at",label:"Diperbarui",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"description",label:"Deskripsi",methods:{create:{type:"textarea"},update:{type:"textarea"}}},{id:"total_iuran_jkk_value",label:"Total Iuran JKK",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"total_iuran_jkm_value",label:"Total Iuran JKM",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"total_iuran_jp_bb_company_value",label:"Total Iuran Perusahaan",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"total_iuran_jp_bb_employee_value",label:"Total Iuran Tenaga Kerja",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"total_iuran_jht_company_value",label:"Total Iuran JHT Perusahaan",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"total_iuran_jht_employee_value",label:"Total Iuran JHT Tenaga Kerja",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"total_kekurangan_jp_value",label:"Total Kekurangan Iuran JP",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"total_iuran_bpjs_company_value",label:"Total Iuran Beban Perusahaan",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"total_iuran_bpjs_employee_value",label:"Total Iuran Beban Tenaga Kerja",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"total_iuran_value",label:"Total",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"periode_month",label:"Periode",methods:{create:!1,update:!1,list:{transform:"period"},detail:{transform:"period"}}}]}}},mounted:function(){this.getThisMonth()},methods:{redirect:function(t){this.$router.push({name:t,query:{view:"list"}}).catch(function(t){return t})},checkThisMonth:function(){this.getPremiMonth(),this.getPeriodMonth()},getThisMonth:function(){var t=this,e={periode_month:r()(new Date).set("date",1).format("YYYY-MM-DD")};this.$_api.list(this.config.setter,e).then(function(e){t.isAlertShow=!e.data.length}).catch(function(e){t.$_alert.error(e)})},getPremiMonth:function(){var t=this;this.isLoadingPremi=!0;var e={periode_month:r()(r()(this.firstForm.periode_month,"MMMM YYYY").toDate()).format("YYYY-MM-DD")};this.$_api.list("config-prosen-bpjs-tenaga-kerja",e).then(function(e){t.isLoadingPremi=!1,t.isAvailablePremi=!!e.data.length}).catch(function(e){t.isLoadingPremi=!1,t.$_alert.error(e)})},getPeriodMonth:function(){var t=this;this.isLoadingPeriod=!0;var e={periode_month:r()(r()(this.firstForm.periode_month,"MMMM YYYY").toDate()).format("YYYY-MM-DD")};this.$_api.list("payroll-periodes",e).then(function(e){t.isLoadingPeriod=!1,t.isAvailablePeriod=!!e.data.length}).catch(function(e){t.isLoadingPeriod=!1,t.$_alert.error(e)})},generateMonth:function(){var t=this,e={periode_month:r()(r()(this.firstForm.periode_month,"MMMM YYYY").toDate()).format("YYYY-MM-DD")};this.$_api.create("custom/bpjs-tk-bills",e).then(function(e){t.$children[0].getEvent("detail",e.data),t.isAlertShow=!1,t.$set(t.firstForm,"periode_month",null),t.$_alert.success(null,t.config.title+" berhasil dibuat")}).catch(function(e){t.$_alert.error(e)})}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tas-base-crud",{key:t.mainKey,attrs:{config:t.config,"hide-create":"","hide-update":"","hide-detail":""},scopedSlots:t._u([{key:"list-action",fn:function(){return[t.$_sys.isAllowed(t.config.permission.create)?i("a",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-create-simpan-pinjam",modifiers:{"modal-create-simpan-pinjam":!0}}],staticClass:"btn btn-primary btn-icon btn-circle ml-3"},[i("i",{staticClass:"ri-add-line p-0"})]):t._e(),t._v(" "),i("b-modal",{attrs:{id:"modal-create-simpan-pinjam","hide-footer":"","hide-header":"",centered:"",size:"md",title:t.config.title}},[i("div",{},[i("h5",{staticClass:"font-wight-bolder"},[t._v("Informasi")]),t._v(" "),i("p",[t._v(" Sebelum membuat "),i("b",[t._v(t._s(t.config.title))]),t._v(", pastikan konfigurasi modul di bawah ini sudah sesuai dengan periode yang dipilih : ")]),t._v(" "),i("div",{staticClass:"form-group mb-2"},[i("span",[t._v("Periode Iuran "),i("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),i("s-input",{attrs:{item:{type:"month",validation:[],placeholder:"Pilih Periode Iuran Simpan / Pinjam",api:"",formatter:t.momentFormat,ic:"w-100 mt-0"}},on:{input:function(e){return t.checkThisMonth()}},model:{value:t.firstForm.periode_month,callback:function(e){t.$set(t.firstForm,"periode_month",e)},expression:"firstForm.periode_month"}})],1),t._v(" "),i("ul",{staticClass:"pl-0 mt-0 mb-5 list-unstyled"},[i("li",{staticClass:"d-flex align-items-center pointer arrow-info-inside",on:{click:function(e){return t.redirect("periode-penggajian")}}},[t.isAvailablePeriod?i("i",{staticClass:"ri-checkbox-line text-success mr-2"}):i("i",{staticClass:"ri-checkbox-blank-line text-danger mr-2"}),t._v(" Periode Penggajian "),t.isLoadingPeriod?i("b-spinner",{staticClass:"ml-2",attrs:{small:""}}):i("i",{staticClass:"ri-arrow-right-line icon-arrow"})],1),t._v(" "),t.isLoadingPeriod||!t.firstForm.periode_month||t.isAvailablePeriod?t._e():i("li",{staticClass:"font-size-sm text-danger"},[t._v("Periode Penggajian "+t._s(t._f("parse")(t.firstForm.periode_month,"period"))+" belum dibuat !")]),t._v(" "),i("li",{staticClass:"d-flex align-items-center pointer arrow-info-inside",on:{click:function(e){return t.redirect("mapping-upah-BPJS")}}},[i("i",{staticClass:"ri-checkbox-line text-success mr-2"}),t._v(" Mapping Upah BPJS "),i("i",{staticClass:"ri-arrow-right-line icon-arrow"})]),t._v(" "),i("li",{staticClass:"d-flex align-items-center pointer arrow-info-inside",on:{click:function(e){return t.redirect("setup-gaji-tenaga-kerja")}}},[i("i",{staticClass:"ri-checkbox-line text-success mr-2"}),t._v(" Setup Gaji Tenaga Kerja "),i("i",{staticClass:"ri-arrow-right-line icon-arrow"})]),t._v(" "),i("li",{staticClass:"d-flex align-items-center pointer arrow-info-inside",on:{click:function(e){return t.redirect("premi-BPJS-tenaga-kerja")}}},[t.isAvailablePremi?i("i",{staticClass:"ri-checkbox-line text-success mr-2"}):i("i",{staticClass:"ri-checkbox-blank-line text-danger mr-2"}),t._v(" Premi BPJS Tenaga Kerja "),t.isLoadingPremi?i("b-spinner",{staticClass:"ml-2",attrs:{small:""}}):i("i",{staticClass:"ri-arrow-right-line icon-arrow"})],1),t._v(" "),t.isLoadingPremi||!t.firstForm.periode_month||t.isAvailablePremi?t._e():i("li",{staticClass:"font-size-sm text-danger"},[t._v("Premi pada periode "+t._s(t._f("parse")(t.firstForm.periode_month,"period"))+" belum dibuat !")])])]),t._v(" "),i("div",{staticClass:"text-right"},[i("button",{staticClass:"btn btn-primary",attrs:{disabled:!(t.firstForm.periode_month&&t.isAvailablePremi&&t.isAvailablePeriod)},on:{click:function(e){return t.generateMonth()}}},[t._v(" Buat "+t._s(t.config.title)+" ")])])])]},proxy:!0},{key:"list-table-action",fn:function(e){return[i("a",{staticClass:"btn btn-info btn-sm",on:{click:function(i){return t.$children[0].getEvent("detail",e.rowData)}}},[t._v(" Lihat Detail Iuran ")])]}},{key:"header-table",fn:function(){return[i("div",{staticClass:"card-body py-0"},[t.isAlertShow?i("div",{staticClass:"alert alert-custom alert-light-danger p-2 mb-0",attrs:{role:"alert"}},[i("div",{staticClass:"alert-icon"},[i("span",{staticClass:"svg-icon svg-icon-danger svg-icon-xl"},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[i("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[i("rect",{attrs:{x:"0",y:"0",width:"24",height:"24"}}),t._v(" "),i("path",{attrs:{d:"M11.1669899,4.49941818 L2.82535718,19.5143571 C2.557144,19.9971408 2.7310878,20.6059441 3.21387153,20.8741573 C3.36242953,20.9566895 3.52957021,21 3.69951446,21 L21.2169432,21 C21.7692279,21 22.2169432,20.5522847 22.2169432,20 C22.2169432,19.8159952 22.1661743,19.6355579 22.070225,19.47855 L12.894429,4.4636111 C12.6064401,3.99235656 11.9909517,3.84379039 11.5196972,4.13177928 C11.3723594,4.22181902 11.2508468,4.34847583 11.1669899,4.49941818 Z",fill:"#000000",opacity:"0.3"}}),t._v(" "),i("rect",{attrs:{fill:"#000000",x:"11",y:"9",width:"2",height:"7",rx:"1"}}),t._v(" "),i("rect",{attrs:{fill:"#000000",x:"11",y:"17",width:"2",height:"2",rx:"1"}})])])])]),t._v(" "),i("div",{staticClass:"alert-text"},[t._v("Data "+t._s(t.config.title)+" pada bulan ini belum dibuat!")])]):t._e()])]},proxy:!0}])})},staticRenderFns:[]};var o=i("VU/8")(n,s,!1,function(t){i("0Pau")},"data-v-c598a20a",null);e.default=o.exports}});
//# sourceMappingURL=5.754b11a2c1539f547ebf.js.map