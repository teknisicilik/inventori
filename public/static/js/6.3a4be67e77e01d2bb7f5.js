webpackJsonp([6],{PcUx:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("PJh5"),r=i.n(a);r.a.locale("id");var s={name:"crud-bpjs-kes-bills",data:function(){return{mainKey:1,isAlertShow:!1,isLoadingPremi:!1,isAvailablePremi:!1,isAvailablePeriod:!1,isLoadingPeriod:!1,firstForm:{periode_month:null},momentFormat:{stringify:function(e){return e?r()(e).format("MMMM YYYY"):""},parse:function(e){return e?r()(e,"MMMM YYYY").toDate():null}},config:{title:"Iuran BPJS Kesehatan",model_api:"bpjs-kes-bills",getter:"bpjs-kes-bills",setter:"bpjs-kes-bills",pk_field:null,permission:{create:"create-bpjs-kes-bills",read:"view-bpjs-kes-bills",update:"update-bpjs-kes-bills",delete:"delete-bpjs-kes-bills"},slave:[{name:"Rincian Iuran",permission:"view-bpjs-kes-bill-details",module:"bpjs/bpjs-kes-bill-details",as_param:"bpjs_kes_bill_id",key_field:"id"}],fields:[{id:"id",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"updated_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_at",label:"Dibuat",methods:{create:!1,update:!1,filter:!1}},{id:"updated_at",label:"Diperbarui",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"description",label:"Deskripsi",methods:{create:{type:"textarea"},update:{type:"textarea"}}},{id:"total_iuran_company_value",label:"Total Iuran Perusahaan",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"total_iuran_employee_value",label:"Total Iuran Tenaga Kerja",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"total_iuran_tambahan_value",label:"Total Iuran Tambahan",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"total_iuran_value",label:"Total",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"periode_month",label:"Periode",methods:{create:!1,update:!1,list:{transform:"period"},detail:{transform:"period"}}}]}}},mounted:function(){this.getThisMonth()},methods:{redirect:function(e){this.$router.push({name:e,query:{view:"list"}}).catch(function(e){return e})},checkThisMonth:function(){this.getPremiMonth(),this.getPeriodMonth()},getThisMonth:function(){var e=this,t={periode_month:r()(new Date).set("date",1).format("YYYY-MM-DD")};this.$_api.list(this.config.setter,t).then(function(t){e.isAlertShow=!t.data.length}).catch(function(t){e.$_alert.error(t)})},getPremiMonth:function(){var e=this;this.isLoadingPremi=!0;var t={periode_month:r()(r()(this.firstForm.periode_month,"MMMM YYYY").toDate()).format("YYYY-MM-DD")};this.$_api.list("config-prosen-bpjs-kesehatan",t).then(function(t){e.isLoadingPremi=!1,e.isAvailablePremi=!!t.data.length}).catch(function(t){e.isLoadingPremi=!1,e.$_alert.error(t)})},getPeriodMonth:function(){var e=this;this.isLoadingPeriod=!0;var t={periode_month:r()(r()(this.firstForm.periode_month,"MMMM YYYY").toDate()).format("YYYY-MM-DD")};this.$_api.list("payroll-periodes",t).then(function(t){e.isLoadingPeriod=!1,e.isAvailablePeriod=!!t.data.length}).catch(function(t){e.isLoadingPeriod=!1,e.$_alert.error(t)})},generateMonth:function(){var e=this,t={periode_month:r()(r()(this.firstForm.periode_month,"MMMM YYYY").toDate()).format("YYYY-MM-DD")};this.$_api.create("custom/bpjs-kes-bills",t).then(function(t){e.$children[0].getEvent("detail",t.data),e.isAlertShow=!1,e.$set(e.firstForm,"periode_month",null),e.$_alert.success(null,e.config.title+" berhasil dibuat")}).catch(function(t){e.$_alert.error(t)})}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("tas-base-crud",{key:e.mainKey,attrs:{config:e.config,"hide-create":"","hide-update":"","hide-detail":""},scopedSlots:e._u([{key:"list-action",fn:function(){return[e.$_sys.isAllowed(e.config.permission.create)?i("a",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-create-simpan-pinjam",modifiers:{"modal-create-simpan-pinjam":!0}}],staticClass:"btn btn-primary btn-icon btn-circle ml-3"},[i("i",{staticClass:"ri-add-line p-0"})]):e._e(),e._v(" "),i("b-modal",{attrs:{id:"modal-create-simpan-pinjam","hide-footer":"","hide-header":"",centered:"",size:"md",title:e.config.title}},[i("div",{},[i("h5",{staticClass:"font-wight-bolder"},[e._v("Informasi")]),e._v(" "),i("p",[e._v(" Sebelum membuat "),i("b",[e._v(e._s(e.config.title))]),e._v(", pastikan konfigurasi modul di bawah ini sudah sesuai dengan periode yang dipilih :")]),e._v(" "),i("div",{staticClass:"form-group mb-2"},[i("span",[e._v("Periode Iuran "),i("span",{staticClass:"text-danger"},[e._v("*")])]),e._v(" "),i("s-input",{attrs:{item:{type:"month",validation:[],placeholder:"Pilih Periode Iuran Simpan / Pinjam",api:"",formatter:e.momentFormat,ic:"w-100 mt-0"}},on:{input:function(t){return e.checkThisMonth()}},model:{value:e.firstForm.periode_month,callback:function(t){e.$set(e.firstForm,"periode_month",t)},expression:"firstForm.periode_month"}})],1),e._v(" "),i("ul",{staticClass:"pl-0 mt-0 mb-5 list-unstyled"},[i("li",{staticClass:"d-flex align-items-center pointer arrow-info-inside",on:{click:function(t){return e.redirect("periode-penggajian")}}},[e.isAvailablePeriod?i("i",{staticClass:"ri-checkbox-line text-success mr-2"}):i("i",{staticClass:"ri-checkbox-blank-line text-danger mr-2"}),e._v(" Periode Penggajian "),e.isLoadingPeriod?i("b-spinner",{staticClass:"ml-2",attrs:{small:""}}):i("i",{staticClass:"ri-arrow-right-line icon-arrow"})],1),e._v(" "),e.isLoadingPeriod||!e.firstForm.periode_month||e.isAvailablePeriod?e._e():i("li",{staticClass:"font-size-sm text-danger"},[e._v("Periode Penggajian "+e._s(e._f("parse")(e.firstForm.periode_month,"period"))+" belum dibuat !")]),e._v(" "),i("li",{staticClass:"d-flex align-items-center pointer arrow-info-inside",on:{click:function(t){return e.redirect("mapping-upah-BPJS")}}},[i("i",{staticClass:"ri-checkbox-line text-success mr-2"}),e._v(" Mapping Upah BPJS "),i("i",{staticClass:"ri-arrow-right-line icon-arrow"})]),e._v(" "),i("li",{staticClass:"d-flex align-items-center pointer arrow-info-inside",on:{click:function(t){return e.redirect("setup-gaji-tenaga-kerja")}}},[i("i",{staticClass:"ri-checkbox-line text-success mr-2"}),e._v(" Setup Gaji Tenaga Kerja "),i("i",{staticClass:"ri-arrow-right-line icon-arrow"})]),e._v(" "),i("li",{staticClass:"d-flex align-items-center pointer arrow-info-inside",on:{click:function(t){return e.redirect("premi-BPJS-kesehatan")}}},[e.isAvailablePremi?i("i",{staticClass:"ri-checkbox-line text-success mr-2"}):i("i",{staticClass:"ri-checkbox-blank-line text-danger mr-2"}),e._v(" Premi BPJS Kesehatan "),e.isLoadingPremi?i("b-spinner",{staticClass:"ml-2",attrs:{small:""}}):i("i",{staticClass:"ri-arrow-right-line icon-arrow"})],1),e._v(" "),e.isLoadingPremi||!e.firstForm.periode_month||e.isAvailablePremi?e._e():i("li",{staticClass:"font-size-sm text-danger"},[e._v("Premi pada periode "+e._s(e._f("parse")(e.firstForm.periode_month,"period"))+" belum dibuat !")])])]),e._v(" "),i("div",{staticClass:"text-right"},[i("button",{staticClass:"btn btn-primary",attrs:{disabled:!(e.firstForm.periode_month&&e.isAvailablePremi&&e.isAvailablePeriod)},on:{click:function(t){return e.generateMonth()}}},[e._v(" Buat "+e._s(e.config.title)+" ")])])])]},proxy:!0},{key:"list-table-action",fn:function(t){return[i("a",{staticClass:"btn btn-info btn-sm",on:{click:function(i){return e.$children[0].getEvent("detail",t.rowData)}}},[e._v(" Lihat Detail Iuran ")])]}},{key:"header-table",fn:function(){return[i("div",{staticClass:"card-body py-0"},[e.isAlertShow?i("div",{staticClass:"alert alert-custom alert-light-danger p-2 mb-0",attrs:{role:"alert"}},[i("div",{staticClass:"alert-icon"},[i("span",{staticClass:"svg-icon svg-icon-danger svg-icon-xl"},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[i("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[i("rect",{attrs:{x:"0",y:"0",width:"24",height:"24"}}),e._v(" "),i("path",{attrs:{d:"M11.1669899,4.49941818 L2.82535718,19.5143571 C2.557144,19.9971408 2.7310878,20.6059441 3.21387153,20.8741573 C3.36242953,20.9566895 3.52957021,21 3.69951446,21 L21.2169432,21 C21.7692279,21 22.2169432,20.5522847 22.2169432,20 C22.2169432,19.8159952 22.1661743,19.6355579 22.070225,19.47855 L12.894429,4.4636111 C12.6064401,3.99235656 11.9909517,3.84379039 11.5196972,4.13177928 C11.3723594,4.22181902 11.2508468,4.34847583 11.1669899,4.49941818 Z",fill:"#000000",opacity:"0.3"}}),e._v(" "),i("rect",{attrs:{fill:"#000000",x:"11",y:"9",width:"2",height:"7",rx:"1"}}),e._v(" "),i("rect",{attrs:{fill:"#000000",x:"11",y:"17",width:"2",height:"2",rx:"1"}})])])])]),e._v(" "),i("div",{staticClass:"alert-text"},[e._v("Data "+e._s(e.config.title)+" pada bulan ini belum dibuat!")])]):e._e()])]},proxy:!0}])})},staticRenderFns:[]};var o=i("VU/8")(s,n,!1,function(e){i("xlIy")},"data-v-66a80758",null);t.default=o.exports},xlIy:function(e,t){}});
//# sourceMappingURL=6.3a4be67e77e01d2bb7f5.js.map