webpackJsonp([53],{Jd1T:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),i=a.n(n),s=a("exGp"),l=a.n(s),r=a("woOf"),o=a.n(r),c=a("PJh5"),d=a.n(c);d.a.locale("id");var p={name:"generate-gaji",data:function(){return{selectedPeriod:null,isLoadingPeriod:!1,isLoadingChecklist:!1,isLoadingPayroll:!1,isLoadingSlip:!1,finaAcountLoading:{},mainData:{checklist:null,detailPayroll:null},config:{permission:{create:"create-payroll-periode-calculation",read:"view-payroll-periode-calculation",update:"update-payroll-periode-calculation",delete:"delete-payroll-periode-calculation"}},mainKey:0,refreshKey:0,configEmployee:{title:"Daftar Gaji Tenaga Kerja",model_api:null,getter:"custom/payroll-periode-calculation/employee-on-periode-list",setter:"custom/payroll-periode-calculation/employee-on-periode-list",custom_api:{list:null,read:null},pk_field:"employee_id",permission:{create:"create-payroll-periode-calculation",read:"view-payroll-periode-calculation",update:"update-payroll-periode-calculation",delete:"delete-payroll-periode-calculation"},slave:[],fields:[{id:"id",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"updated_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_at",label:"Dibuat",methods:{create:!1,update:!1,filter:!1}},{id:"updated_at",label:"Diperbarui",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"salary_value",label:"Penerimaan",methods:{list:{transform:"money"}}},{id:"pembulatan_salary",label:"Pembulatan",methods:{list:{transform:"money"}}},{id:"employee_id",label:"Nama Tenaga Kerja",methods:{list:{view_data:"rel_employee_id"},detail:{view_data:"rel_employee_id"},create:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}},update:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}},filter:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}}}},{id:"job_position_id",label:"Jabatan",methods:{list:{view_data:"rel_job_position_id",show:!1},detail:{view_data:"rel_job_position_id"},create:{setter:"job-positions",getter:"job-positions",type:"lookup-radio",option:{list_pointer:{label:"job_position_name",code:"id",display:["job_position_name"]}}},update:{setter:"job-positions",getter:"job-positions",type:"lookup-radio",option:{list_pointer:{label:"job_position_name",code:"id",display:["job_position_name"]}}},filter:{setter:"job-positions",getter:"job-positions",type:"lookup-radio",option:{list_pointer:{label:"job_position_name",code:"id",display:["job_position_name"]}}}}},{id:"status_employment_id",label:"Status Ketenagakerjaan",methods:{list:{view_data:"rel_status_employment_id",show:!1},detail:{view_data:"rel_status_employment_id"},create:{setter:"custom/master-status-employments",getter:"custom/master-status-employments",type:"lookup-radio",option:{list_pointer:{label:"name",code:"id",display:["name"]},get_param:[{id:"job_position_id"}]}},update:{setter:"custom/master-status-employments",getter:"custom/master-status-employments",type:"lookup-radio",option:{list_pointer:{label:"name",code:"id",display:["name"]},get_param:[{id:"job_position_id"}]}},filter:{setter:"custom/master-status-employments",getter:"custom/master-status-employments",type:"lookup-radio",option:{list_pointer:{label:"name",code:"id",display:["name"]},get_param:[{id:"job_position_id"}]}}}},{id:"is_mpp",label:"MPP",methods:{list:{order:!0,class:{false:"badge badge-danger",true:"badge badge-primary"},transform:"ynBool"},detail:{order:!0,class:{false:"badge badge-danger",true:"badge badge-primary"},transform:"ynBool"},create:{type:"radio",value:!1,option:{list_pointer:{label:"label",code:"code",list:[{label:"Ya",code:!0},{label:"Tidak",code:!1}]}}},update:{type:"radio",option:{list_pointer:{label:"label",code:"code",list:[{label:"Ya",code:!0},{label:"Tidak",code:!1}]}}},filter:{type:"radio",option:{list_pointer:{label:"label",code:"code",list:[{label:"Ya",code:!0},{label:"Tidak",code:!1}]}}}}},{id:"is_plt",label:"PLT",methods:{list:{order:!0,class:{false:"badge badge-danger",true:"badge badge-primary"},transform:"ynBool"},detail:{order:!0,class:{false:"badge badge-danger",true:"badge badge-primary"},transform:"ynBool"},create:{type:"radio",value:!1,option:{list_pointer:{label:"label",code:"code",list:[{label:"Ya",code:!0},{label:"Tidak",code:!1}]}}},update:{type:"radio",option:{list_pointer:{label:"label",code:"code",list:[{label:"Ya",code:!0},{label:"Tidak",code:!1}]}}},filter:{type:"radio",option:{list_pointer:{label:"label",code:"code",list:[{label:"Ya",code:!0},{label:"Tidak",code:!1}]}}}}},{id:"status_salary",data:"status_salary",label:"Status",placeholder:null,methods:{list:{order:!0,class:{not_calculated_yet:"badge badge-danger",calculated:"badge badge-primary"},transform:"calculated"},detail:{order:!0,class:{not_calculated_yet:"badge badge-danger",calculated:"badge badge-primary"},transform:"calculated"},create:!1,update:{view_data:"status_salary",type:"radio",value:"calculated",option:{list_pointer:{label:"label",code:"code",list:[{label:"Sudah dihitung",code:"calculated"},{label:"Belum dihitung",code:"not_calculated_yet"}]}}},filter:{view_data:"status_salary",type:"radio",option:{list_pointer:{label:"label",code:"code",list:[{label:"Sudah dihitung",code:"calculated"},{label:"Belum dihitung",code:"not_calculated_yet"}]}}}}}]},modalData:null,printConfig:{id:"printSlip",preview:!1,standard:"strict"}}},watch:{selectedPeriod:{immediate:!1,deep:!0,handler:function(t,e){this.$store.commit("set",["lastSelectedPeriodPayroll",t,!1]),t?(this.$set(this.configEmployee.custom_api,"list","custom/payroll-periode-calculation/employee-on-periode-list?periode_month="+this.selectedPeriod),this.getChecklist()):this.mainData=o()({},{checklist:null,detailPayroll:null})}},mainKey:{immediate:!1,deep:!1,handler:function(t){this.$refs["sub-module"].$children[1].getData()}}},beforeMount:function(){this.getThisMonth()},mounted:function(){this.$_sys.togleClass("kt_body","aside-minimize",!0),this.$store.commit("set",["sideNavSecondary",!1])},methods:{getRouterName:function(t){return"payroll_periodes"===t?"periode-penggajian":"employee_on_periodes"===t?"periode-penggajian":"presence_on_periodes"===t?"rekap-presensi":"koperasi_simpan_pinjam"===t?"simpan-pinjam":"bpjs_kes_bills"===t?"iuran-BPJS-kesehatan":"bpjs_tk_bills"===t?"iuran-BPJS-tenaga-kerja":"tunjangan_kehadiran"===t?"tunjangan-kehadiran":"tunjangan_transports"===t?"tunjangan-transports":"tunjangan_makan"===t?"tunjangan-makan":"tunjangan_beasiswa"===t?"tunjangan-beasiswa":"tunjangan_lembur"===t?"tunjangan-lembur":"pinjaman_bank"===t?"pinjaman-bank":"potongan_sanksi"===t?"potongan-sanksi":"perusahaan"},redirect:function(t,e){var a=this.getRouterName(t);e&&e.id?this.$router.push({name:a,query:{view:"detail",id:e.id}}).catch(function(t){return t}):this.$router.push({name:a,query:{view:"list"}}).catch(function(t){return t})},getThisMonth:function(){var t=this;return l()(i.a.mark(function e(){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoadingPeriod=!0,a=t.$store.state.lastSelectedPeriodPayroll){e.next=9;break}return e.next=5,t.sendAPI("list","payroll-periodes",{periode_month:d()(new Date).set({date:1}).format("YYYY-MM-DD")});case 5:(n=e.sent).data.length&&(t.selectedPeriod=n.data[0].periode_month,t.$store.commit("set",["lastSelectedPeriodPayroll",n.data[0].periode_month,!1])),e.next=10;break;case 9:t.selectedPeriod=a;case 10:t.isLoadingPeriod=!1;case 11:case"end":return e.stop()}},e,t)}))()},getChecklist:function(){var t=this;return l()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoadingChecklist=!0,e.next=3,t.sendAPI("get","custom/payroll-periode-calculation/checklist",{periode_month:t.selectedPeriod});case 3:a=e.sent,t.$set(t.mainData,"checklist",a.data),t.$set(t.mainData,"status_overall",a.status_overall),t.getDetailPayroll(),t.isLoadingChecklist=!1;case 8:case"end":return e.stop()}},e,t)}))()},getDetailPayroll:function(){var t=this;return l()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoadingPayroll=!0,e.next=3,t.sendAPI("get","custom/payroll-periode-calculation/payroll-periode-show",{periode_month:t.selectedPeriod});case 3:a=e.sent,t.$set(t.mainData,"detailPayroll",a.data),t.isLoadingPayroll=!1;case 6:case"end":return e.stop()}},e,t)}))()},sendAPI:function(t,e,a){var n=this;return this.$_api[t](e,a).then(function(t){return t}).catch(function(t){n.$_alert.error(t)})},calculateAllEmployee:function(){var t=this;return l()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoadingPayroll=!0,e.next=3,t.sendAPI("post","custom/payroll-periode-calculation/salary-calculation-all",{periode_month:t.selectedPeriod});case 3:e.sent&&t.$_alert.success("Berhasil menghitung semua Gaji Tenaga Kerja"),t.mainKey++,t.isLoadingPayroll=!1;case 7:case"end":return e.stop()}},e,t)}))()},getPayrollDetail:function(t,e){var a=this;return l()(i.a.mark(function n(){var s,l;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.sendAPI("get","custom/payroll-periode-calculation/salary-component-on-periodes-list-tree",{id:e.id});case 2:s=n.sent,l={listTree:s.data.data_salary_detail,presence:s.data.data_employee_presence_recaps,employee:s.data.data_employee},a.modalData=o()({},l,e),a.$nextTick().then(function(e){a.$bvModal.show(t)});case 6:case"end":return n.stop()}},n,a)}))()},downloadSlip:function(t){var e=this;return l()(i.a.mark(function n(){var s,l;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.isLoadingSlip=!0,s=a("Oswe"),l=document.getElementById("printSlip"),n.next=5,s.toPng(l).then(function(e){var a=document.createElement("a");a.href=e;var n="Slip Gaji Periode "+d()(t).format("MMMM YYYY");a.setAttribute("download",n+".png"),document.body.appendChild(a),a.click()});case 5:e.isLoadingSlip=!1;case 6:case"end":return n.stop()}},n,e)}))()},updateAkunFINA:function(t){var e=this;return l()(i.a.mark(function a(){var n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.$set(e.finaAcountLoading,t.id,!0),n={id:t.id,fina_salary_account_id:t.fina_salary_account_id},a.next=4,e.sendAPI("put","custom/payroll-periode-calculation/salary-component-on-periodes-account-update",n);case 4:e.$set(e.finaAcountLoading,t.id,!1);case 5:case"end":return a.stop()}},a,e)}))()},recountDetail:function(){var t=this;return l()(i.a.mark(function e(){var a,n,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoadingSlip=!0,a={id:t.modalData.id,periode_month:t.selectedPeriod},e.next=4,t.sendAPI("post","custom/payroll-periode-calculation/salary-calculation-single",a);case 4:if(!e.sent.check){e.next=12;break}return e.next=8,t.sendAPI("get","custom/payroll-periode-calculation/salary-component-on-periodes-list-tree",{id:t.modalData.id});case 8:n=e.sent,s={listTree:n.data.data_salary_detail,presence:n.data.data_employee_presence_recaps,employee:n.data.data_employee},t.modalData=o()(t.modalData,s),t.mainKey++;case 12:t.isLoadingSlip=!1;case 13:case"end":return e.stop()}},e,t)}))()},lockDocument:function(t){var e=this;!0===t.is_lock?this.$_alert.confirm("Kunci Perhitungan","Data Penggajian tidak dapat diubah kembali ketika perhitungan Gaji dikunci, Lanjutkan?").then(function(a){a.isConfirmed?e.$router.push({name:"control-sheet",query:{view:"list"}}).catch(function(t){return t}):t.is_lock=!1}):this.$_alert.confirm("Buka Kunci Perhitungan","Data Penggajian tidak dapat diubah kembali ketika perhitungan Gaji dikunci, Lanjutkan?").then(function(e){e.isConfirmed||(t.is_lock=!0)})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row row-eq-height"},[a("div",{staticClass:"col-lg-4"},[a("b-overlay",{attrs:{show:t.isLoadingPeriod,rounded:"sm"}},[a("div",{staticClass:"card card-custom"},[a("div",{staticClass:"card-body pt-2 pb-2 mt-n3"},[a("div",{staticClass:"d-flex align-items-center justify-content-between py-5"},[a("h5",{staticClass:"font-weight-bolder text-dark mb-0"},[t._v("Perhitungan Gaji Tenaga Kerja")]),t._v(" "),a("s-input",{attrs:{item:{nm:!0,label:"",defaultCaption:"Pilih Periode Penggajian",type:"lookup-radio",validation:[],placeholder:"",api:"payroll-periodes",pointer:{label:"periode_month|period",code:"periode_month",display:["periode_month|period","count_day_of_work|count_day_of_work"]}}},model:{value:t.selectedPeriod,callback:function(e){t.selectedPeriod=e},expression:"selectedPeriod"}})],1),t._v(" "),a("p",[t._v("Sebelum menghitung Gaji Tenaga Kerja, pastikan konfigurasi modul di bawah ini sudah terselesaikan :")]),t._v(" "),t.selectedPeriod?t._e():a("div",{staticClass:"alert alert-custom alert-light-danger p-2 mb-3",attrs:{role:"alert"}},[a("div",{staticClass:"alert-icon"},[a("span",{staticClass:"svg-icon svg-icon-danger svg-icon-xl"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[a("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[a("rect",{attrs:{x:"0",y:"0",width:"24",height:"24"}}),t._v(" "),a("path",{attrs:{d:"M11.1669899,4.49941818 L2.82535718,19.5143571 C2.557144,19.9971408 2.7310878,20.6059441 3.21387153,20.8741573 C3.36242953,20.9566895 3.52957021,21 3.69951446,21 L21.2169432,21 C21.7692279,21 22.2169432,20.5522847 22.2169432,20 C22.2169432,19.8159952 22.1661743,19.6355579 22.070225,19.47855 L12.894429,4.4636111 C12.6064401,3.99235656 11.9909517,3.84379039 11.5196972,4.13177928 C11.3723594,4.22181902 11.2508468,4.34847583 11.1669899,4.49941818 Z",fill:"#000000",opacity:"0.3"}}),t._v(" "),a("rect",{attrs:{fill:"#000000",x:"11",y:"9",width:"2",height:"7",rx:"1"}}),t._v(" "),a("rect",{attrs:{fill:"#000000",x:"11",y:"17",width:"2",height:"2",rx:"1"}})])])])]),t._v(" "),a("div",{staticClass:"alert-text"},[t._v("Periode penggajian belum dipilih!")])]),t._v(" "),a("b-overlay",{attrs:{show:t.isLoadingChecklist,rounded:"sm"}},[a("div",{staticClass:"scrolling-view"},[t.mainData.checklist?a("div",{staticClass:"timeline timeline-5"},[a("sequential-entrance",{attrs:{fromBottom:"",delay:"100"}},t._l(t.mainData.checklist,function(e,n){return a("div",{key:n+"-timeline-checklist",staticClass:"timeline-items"},[a("div",{staticClass:"timeline-item"},[a("div",{staticClass:"timeline-media",class:"bg-light-"+e.value},[a("span",{staticClass:"svg-icon svg-icon-2x",class:"svg-icon-"+e.value},["success"===e.value?a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[a("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[a("rect",{attrs:{x:"0",y:"0",width:"24",height:"24"}}),t._v(" "),a("circle",{attrs:{fill:"#000000",opacity:"0.3",cx:"12",cy:"12",r:"10"}}),t._v(" "),a("path",{attrs:{d:"M16.7689447,7.81768175 C17.1457787,7.41393107 17.7785676,7.39211077 18.1823183,7.76894473 C18.5860689,8.1457787 18.6078892,8.77856757 18.2310553,9.18231825 L11.2310553,16.6823183 C10.8654446,17.0740439 10.2560456,17.107974 9.84920863,16.7592566 L6.34920863,13.7592566 C5.92988278,13.3998345 5.88132125,12.7685345 6.2407434,12.3492086 C6.60016555,11.9298828 7.23146553,11.8813212 7.65079137,12.2407434 L10.4229928,14.616916 L16.7689447,7.81768175 Z",fill:"#000000","fill-rule":"nonzero"}})])]):"danger"===e.value?a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[a("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[a("rect",{attrs:{x:"0",y:"0",width:"24",height:"24"}}),t._v(" "),a("circle",{attrs:{fill:"#000000",opacity:"0.3",cx:"12",cy:"12",r:"10"}}),t._v(" "),a("path",{attrs:{d:"M12.0355339,10.6213203 L14.863961,7.79289322 C15.2544853,7.40236893 15.8876503,7.40236893 16.2781746,7.79289322 C16.6686989,8.18341751 16.6686989,8.81658249 16.2781746,9.20710678 L13.4497475,12.0355339 L16.2781746,14.863961 C16.6686989,15.2544853 16.6686989,15.8876503 16.2781746,16.2781746 C15.8876503,16.6686989 15.2544853,16.6686989 14.863961,16.2781746 L12.0355339,13.4497475 L9.20710678,16.2781746 C8.81658249,16.6686989 8.18341751,16.6686989 7.79289322,16.2781746 C7.40236893,15.8876503 7.40236893,15.2544853 7.79289322,14.863961 L10.6213203,12.0355339 L7.79289322,9.20710678 C7.40236893,8.81658249 7.40236893,8.18341751 7.79289322,7.79289322 C8.18341751,7.40236893 8.81658249,7.40236893 9.20710678,7.79289322 L12.0355339,10.6213203 Z",fill:"#000000"}})])]):a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[a("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[a("rect",{attrs:{x:"0",y:"0",width:"24",height:"24"}}),t._v(" "),a("circle",{attrs:{fill:"#000000",opacity:"0.3",cx:"12",cy:"12",r:"10"}}),t._v(" "),a("rect",{attrs:{fill:"#000000",x:"11",y:"7",width:"2",height:"8",rx:"1"}}),t._v(" "),a("rect",{attrs:{fill:"#000000",x:"11",y:"16",width:"2",height:"2",rx:"1"}})])])])]),t._v(" "),a("div",{staticClass:"timeline-desc arrow-info-inside pt-0 pb-0 mb-3",class:"timeline-desc-"+e.value,on:{click:function(a){return t.redirect(e.module_code,e.object_data)}}},[a("div",{staticClass:"p-2",class:"bg-light-"+e.value,staticStyle:{"border-radius":"8px"}},[a("span",{staticClass:"text-dark-75 font-weight-bolder font-size-lg"},[t._v(t._s(n+1)+". "+t._s(e.name))]),t._v(" "),a("p",{staticClass:"mb-1"},[t._v(t._s(e.description))]),t._v(" "),[a("div",{staticClass:"d-flex align-items-center"},[a("span",{staticClass:"font-size-sm font-weight-bolder text-hover-primary"},[t._v("Lihat Modul")]),t._v(" "),a("i",{staticClass:"ri-arrow-right-line icon-arrow"})])]],2)])])])}),0)],1):t._e()])])],1)])])],1),t._v(" "),a("div",{staticClass:"col-lg-8"},[t.mainData.detailPayroll?[a("b-overlay",{attrs:{show:t.isLoadingPayroll,rounded:"sm"}},[a("div",{staticClass:"card card-custom"},[a("div",{staticClass:"card-body pt-2 pb-2 mt-3"},[a("div",{staticClass:"d-flex align-items-center justify-content-between"},[a("h5",{staticClass:"font-weight-bolder text-dark mb-0"},[t._v("Detail Perhitungan Gaji Periode "+t._s(t._f("parse")(t.selectedPeriod,"period")))])]),t._v(" "),a("div",{staticClass:"table-responsive mt-3"},[a("table",{staticClass:"table no-border"},[a("tr",[a("td",{staticClass:"py-1 nowrap-table pl-0"},[t._v("Periode")]),t._v(" "),a("td",{staticClass:"py-1 nowrap-table"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-1 nowrap-table"},[t._v(t._s(t._f("parse")(t.selectedPeriod,"period")))]),t._v(" "),a("td"),t._v(" "),a("td",{staticClass:"py-1 nowrap-table pl-0"},[t._v("Tanggal Awal Pencatatan")]),t._v(" "),a("td",{staticClass:"py-1 nowrap-table"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-1 nowrap-table"},[t._v(t._s(t._f("parse")(t.mainData.detailPayroll.start_date,"longDate")))])]),t._v(" "),a("tr",[a("td",{staticClass:"py-1 nowrap-table pl-0"},[t._v("Hari Kerja")]),t._v(" "),a("td",{staticClass:"py-1 nowrap-table"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-1 nowrap-table"},[t._v(t._s(t._f("parse")(t.mainData.detailPayroll.count_day_of_work,"number"))+" Hari")]),t._v(" "),a("td"),t._v(" "),a("td",{staticClass:"py-1 nowrap-table pl-0"},[t._v("Tanggal Akhir Pencatatan")]),t._v(" "),a("td",{staticClass:"py-1 nowrap-table"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-1 nowrap-table"},[t._v(t._s(t._f("parse")(t.mainData.detailPayroll.end_date,"longDate")))])])])]),t._v(" "),a("hr"),t._v(" "),t.mainData.status_overall?a("div",{staticClass:"d-flex align-items-center justify-content-between mb-5"},[a("button",{staticClass:"btn btn-primary font-size-sm",attrs:{disabled:!t.mainData.status_overall||t.mainData.detailPayroll.is_lock},on:{click:function(e){return t.calculateAllEmployee()}}},[t._v("Hitung Penerimaan Semua Tenaga Kerja ( "+t._s(t._f("parse")(t.mainData.detailPayroll.count_employees,"number"))+" Orang )")]),t._v(" "),a("div",{staticClass:"col-auto pr-0"},[a("span",{staticClass:"switch switch-icon icon-lock align-items-center"},[a("label",{staticClass:"d-flex justify-content-center align-items-center"},[a("label",{staticClass:"pr-2"},[t._v("Kunci Perhitungan")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.mainData.detailPayroll.is_lock,expression:"mainData.detailPayroll.is_lock",modifiers:{lazy:!0}}],attrs:{id:"periode_month",type:"checkbox",name:"lock-","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(t.mainData.detailPayroll.is_lock)?t._i(t.mainData.detailPayroll.is_lock,null)>-1:t.mainData.detailPayroll.is_lock},on:{change:[function(e){var a=t.mainData.detailPayroll.is_lock,n=e.target,i=!!n.checked;if(Array.isArray(a)){var s=t._i(a,null);n.checked?s<0&&t.$set(t.mainData.detailPayroll,"is_lock",a.concat([null])):s>-1&&t.$set(t.mainData.detailPayroll,"is_lock",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.mainData.detailPayroll,"is_lock",i)},function(e){return t.lockDocument(t.mainData.detailPayroll)}]}}),t._v(" "),a("span",{staticClass:"m-0"})])])])]):a("div",{staticClass:"alert alert-custom alert-light-danger mb-5 mt-3",attrs:{role:"alert"}},[a("div",{staticClass:"alert-icon"},[a("span",{staticClass:"svg-icon svg-icon-danger svg-icon-xl"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[a("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[a("rect",{attrs:{x:"0",y:"0",width:"24",height:"24"}}),t._v(" "),a("path",{attrs:{d:"M11.1669899,4.49941818 L2.82535718,19.5143571 C2.557144,19.9971408 2.7310878,20.6059441 3.21387153,20.8741573 C3.36242953,20.9566895 3.52957021,21 3.69951446,21 L21.2169432,21 C21.7692279,21 22.2169432,20.5522847 22.2169432,20 C22.2169432,19.8159952 22.1661743,19.6355579 22.070225,19.47855 L12.894429,4.4636111 C12.6064401,3.99235656 11.9909517,3.84379039 11.5196972,4.13177928 C11.3723594,4.22181902 11.2508468,4.34847583 11.1669899,4.49941818 Z",fill:"#000000",opacity:"0.3"}}),t._v(" "),a("rect",{attrs:{fill:"#000000",x:"11",y:"9",width:"2",height:"7",rx:"1"}}),t._v(" "),a("rect",{attrs:{fill:"#000000",x:"11",y:"17",width:"2",height:"2",rx:"1"}})])])])]),t._v(" "),a("div",{staticClass:"alert-text"},[t._v("Silahkan selesaikan seluruh konfigurasi Modul untuk melanjutkan ke Perhitungan & Slip Gaji Tenaga Kerja")])])])]),t._v(" "),a("tas-base-crud",{ref:"sub-module",attrs:{classes:"mt-3",config:t.configEmployee,"hide-create":"","hide-detail":"","hide-update":"","hide-delete":"","hide-filter":""},scopedSlots:t._u([{key:"list-table-action",fn:function(e){return[a("button",{staticClass:"btn btn-info btn-sm",on:{click:function(a){return t.getPayrollDetail("modal-payroll-details",e.rowData)}}},[t._v("Lihat Detail & Slip Gaji")])]}},{key:"list-header",fn:function(){return[t.modalData?a("b-modal",{attrs:{"hide-header":"",id:"modal-payroll-details","hide-footer":"",size:"xl"}},[a("b-tabs",[a("b-tab",{attrs:{title:"Rincian & Slip Gaji"}},[a("div",{staticClass:"inner-tab p-5 mt-5"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("b-overlay",{attrs:{show:t.isLoadingSlip,rounded:"sm"}},[a("div",{staticClass:"border-primary p-5 bg-white",staticStyle:{border:"2px solid","border-radius":"13px"},attrs:{id:"printSlip"}},[a("div",{staticClass:"d-flex justify-content-start align-items-center"},[a("img",{staticClass:"max-h-45px",attrs:{src:t.$_config.logo.lg,alt:"Logo ADHI"}}),t._v(" "),a("div",{staticClass:"text-left d-flex flex-column ml-5"},[a("h6",{staticClass:"mb-0 font-weight-bolder"},[t._v(" "+t._s(t.$_config.company))]),t._v(" "),a("span",{staticClass:"font-size-sm font-weight-bolder"},[t._v("Slip Gaji Periode "+t._s(t._f("parse")(t.modalData.periode_month,"period")))])])]),t._v(" "),a("hr"),t._v(" "),a("table",{staticClass:"table no-border"},[a("tr",[a("td",{staticClass:"nowrap-table py-0 pl-0"},[t._v("Periode / Bulan")]),t._v(" "),a("td",{staticClass:"nowrap-table py-0"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-0 text-left"},[t._v(" "+t._s(t._f("parse")(t.modalData.periode_month,"period"))+" ")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-0 pl-0"},[t._v("Nama Lengkap")]),t._v(" "),a("td",{staticClass:"nowrap-table py-0"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-0 text-left"},[t._v(" "+t._s(t.modalData.rel_employee_id)+" ")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-0 pl-0"},[t._v("Jabatan")]),t._v(" "),a("td",{staticClass:"nowrap-table py-0"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-0 text-left"},[t._v(" "+t._s(t.modalData.rel_job_position_id)+" ")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-0 pl-0"},[t._v("Status Ketenagakerjaan")]),t._v(" "),a("td",{staticClass:"nowrap-table py-0"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-0 text-left"},[t._v(" "+t._s(t.modalData.rel_status_employment_id)+" ")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-0 pl-0"},[t._v("Hari Kerja")]),t._v(" "),a("td",{staticClass:"nowrap-table py-0"},[t._v(":")]),t._v(" "),t.modalData.presence?a("td",{staticClass:"py-0 text-left"},[t._v(" "+t._s(t.modalData.presence.work_day_count||0)+" Hari")]):a("td",{staticClass:"py-0 text-left"},[t._v(" Tidak ditemukan! ")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-0 pl-0"},[t._v("Tidak Masuk")]),t._v(" "),a("td",{staticClass:"nowrap-table py-0"},[t._v(":")]),t._v(" "),t.modalData.presence?a("td",{staticClass:"py-0 text-left"},[t._v(t._s(t.modalData.presence.work_day_lost_count||0)+" Hari")]):a("td",{staticClass:"py-0 text-left"},[t._v(" Tidak ditemukan! ")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-0 pl-0"},[t._v("Terlambat")]),t._v(" "),a("td",{staticClass:"nowrap-table py-0"},[t._v(":")]),t._v(" "),t.modalData.presence?a("td",{staticClass:"py-0 text-left"},[t._v(" "+t._s(t.modalData.presence.work_day_late_count||0)+" Hari, "+t._s(t.modalData.presence.work_day_minute_late_count||0)+" Menit ")]):a("td",{staticClass:"py-0 text-left"},[t._v(" Tidak ditemukan! ")])])]),t._v(" "),a("hr"),t._v(" "),a("table",{staticClass:"table no-border mb-0"},[t._l(t.modalData.listTree,function(e,n){return[e.children.filter(function(t){return"employee"===t.charge}).length?[a("tr",{key:n+"-parent-list"},[a("th",{staticClass:"py-2",staticStyle:{border:"none"},attrs:{colspan:4}},[t._v(t._s(e.name))])]),t._v(" "),t._l(e.children.filter(function(t){return"employee"===t.charge}),function(e,i){return a("tr",{key:n+"-"+i+"-child-list"},[a("td",{staticClass:"py-1",staticStyle:{border:"none"}},[t._v(" ")]),t._v(" "),a("td",{staticClass:"py-1",staticStyle:{border:"none"}},[t._v(t._s(e.rel_salary_component_id)+" ")]),t._v(" "),a("td",{staticClass:"py-1",staticStyle:{border:"none"}},[a("div",{staticClass:"d-flex justify-content-between"},[a("span",{},[t._v("Rp.")]),t._v(" "),a("span",{staticClass:"text-right font-weight-bold"},[t._v(t._s(t._f("parse")(e.salary_component_value||0,"number")))])])])])}),t._v(" "),a("tr",{key:n+"-child-list-spacing"},[a("td",{staticClass:"py-1",staticStyle:{border:"none"},attrs:{colspan:4}})])]:t._e()]}),t._v(" "),a("tr",[a("th",{staticClass:"py-2 text-uppercase",staticStyle:{border:"none"},attrs:{colspan:4}},[t._v("Total Gaji")])]),t._v(" "),a("tr",[a("td",{staticClass:"py-1",staticStyle:{border:"none"}},[t._v(" ")]),t._v(" "),a("td",{staticClass:"py-1",staticStyle:{border:"none"}},[t._v("Penerimaan")]),t._v(" "),a("td",{staticClass:"py-1",staticStyle:{border:"none"}},[a("div",{staticClass:"d-flex justify-content-between"},[a("span",{},[t._v("Rp.")]),t._v(" "),a("span",{staticClass:"text-right font-weight-bold"},[t._v(t._s(t._f("parse")(t.modalData.employee.salary_value||0,"number")))])])])]),t._v(" "),a("tr",[a("td",{staticClass:"py-1",staticStyle:{border:"none"}},[t._v(" ")]),t._v(" "),a("td",{staticClass:"py-1",staticStyle:{border:"none"}},[t._v("Pembulatan")]),t._v(" "),a("td",{staticClass:"py-1",staticStyle:{border:"none"}},[a("div",{staticClass:"d-flex justify-content-between"},[a("span",{},[t._v("Rp.")]),t._v(" "),a("span",{staticClass:"text-right font-weight-bold"},[t._v(t._s(t._f("parse")(t.modalData.employee.pembulatan_salary||0,"number")))])])])]),t._v(" "),a("tr",[a("td",{staticClass:"py-1",staticStyle:{border:"none"}},[t._v(" ")]),t._v(" "),a("td",{staticClass:"py-1",staticStyle:{border:"none"}},[t._v("Selisih Pembulatan")]),t._v(" "),a("td",{staticClass:"py-1",staticStyle:{border:"none"}},[a("div",{staticClass:"d-flex justify-content-between"},[a("span",{},[t._v("Rp.")]),t._v(" "),a("span",{staticClass:"text-right font-weight-bold"},[t._v(t._s(t._f("parse")(t.modalData.employee.selisih_pembulatan||0,"number")))])])])])],2),t._v(" "),a("div",{staticClass:" text-right mt-5"},[a("span",{staticClass:"font-size-sm font-italic"},[t._v("Dicetak oleh "+t._s(t.$store.state.profile.fullname)),a("br"),t._v(t._s(t._f("parse")(new Date,"longDateTime")))])])])])],1),t._v(" "),a("div",{staticClass:"col-lg-6"},[a("table",{staticClass:"table no-border mb-10 mt-5 mt-lg-0"},[a("tr",[a("th",{staticClass:"font-size-h5 pl-0 pb-0 pt-0",attrs:{colspan:"3"}},[t._v("Tenaga Kerja")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-1 pl-0"},[t._v("Nama Lengkap")]),t._v(" "),a("td",{staticClass:"nowrap-table py-1"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-1 text-left"},[t._v(" "+t._s(t.modalData.rel_employee_id)+" ")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-1 pl-0"},[t._v("Jabatan")]),t._v(" "),a("td",{staticClass:"nowrap-table py-1"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-1 text-left"},[t._v(" "+t._s(t.modalData.rel_job_position_id)+" ")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-1 pl-0"},[t._v("Status Ketenagakerjaan")]),t._v(" "),a("td",{staticClass:"nowrap-table py-1"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-1 text-left"},[t._v(" "+t._s(t.modalData.rel_status_employment_id)+" ")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-1 pl-0"},[t._v("MPP")]),t._v(" "),a("td",{staticClass:"nowrap-table py-1"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-1 text-left"},[t._v(" "+t._s(t._f("parse")(t.modalData.is_mpp,"ynBool"))+" ")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-1 pl-0"},[t._v("PLT")]),t._v(" "),a("td",{staticClass:"nowrap-table py-1"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-1 text-left"},[t._v(" "+t._s(t._f("parse")(t.modalData.is_plt,"ynBool"))+" ")])]),t._v(" "),a("tr",[a("th",{staticClass:"font-size-h5 pl-0 pb-0 pt-5",attrs:{colspan:"3"}},[t._v("Presensi Kehadiran")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-1 pl-0"},[t._v("Hari Kerja")]),t._v(" "),a("td",{staticClass:"nowrap-table py-1"},[t._v(":")]),t._v(" "),t.modalData.presence?a("td",{staticClass:"py-1 text-left"},[t._v(" "+t._s(t.modalData.presence.work_day_count||0)+" Hari")]):a("td",{staticClass:"py-1 text-left"},[t._v(" Tidak ditemukan! ")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-1 pl-0"},[t._v("Tidak Masuk")]),t._v(" "),a("td",{staticClass:"nowrap-table py-1"},[t._v(":")]),t._v(" "),t.modalData.presence?a("td",{staticClass:"py-1 text-left"},[t._v(" "+t._s(t.modalData.presence.work_day_lost_count||0)+" Hari")]):a("td",{staticClass:"py-1 text-left"},[t._v(" Tidak ditemukan! ")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-1 pl-0"},[t._v("Terlambat")]),t._v(" "),a("td",{staticClass:"nowrap-table py-1"},[t._v(":")]),t._v(" "),t.modalData.presence?a("td",{staticClass:"py-1 text-left"},[t._v(" "+t._s(t.modalData.presence.work_day_late_count||0)+" Hari, "+t._s(t.modalData.presence.work_day_minute_late_count||0)+" Menit ")]):a("td",{staticClass:"py-1 text-left"},[t._v(" Tidak ditemukan! ")])]),t._v(" "),t.modalData.listTree.filter(function(t){return t.children.filter(function(t){return"companies"===t.charge}).length}).length?[a("tr",[a("th",{staticClass:"font-size-h5 pl-0 pb-0 pt-5",attrs:{colspan:"3"}},[t._v("Beban Perusahaan")])]),t._v(" "),t._l(t.modalData.listTree,function(e,n){return t._l(e.children.filter(function(t){return"companies"===t.charge}),function(e,i){return a("tr",{key:n+"-"+i+"-beban-perusahaan"},[a("td",{staticClass:"nowrap-table py-1 pl-0"},[t._v(t._s(e.rel_salary_component_id))]),t._v(" "),a("td",{staticClass:"nowrap-table py-1"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-1 text-left"},[t._v(" Rp. "+t._s(t._f("parse")(e.salary_component_value||0,"number")))])])})})]:t._e(),t._v(" "),a("tr",[a("th",{staticClass:"font-size-h5 pl-0 pb-0 pt-5",attrs:{colspan:"3"}},[t._v("Penggajian")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-1 pl-0"},[t._v("Status Penggajian")]),t._v(" "),a("td",{staticClass:"nowrap-table py-1"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-1 text-left font-weight-bolder",class:"calculated"===t.modalData.employee.status_salary?"text-success":"text-danger"},[t._v(" "+t._s(t._f("parse")(t.modalData.status_salary,"calculated"))+" ")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-1 pl-0"},[t._v("Total Penerimaan")]),t._v(" "),a("td",{staticClass:"nowrap-table py-1"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-1 text-left"},[t._v(" Rp. "+t._s(t._f("parse")(t.modalData.employee.salary_value||0,"number"))+" ")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-1 pl-0"},[t._v("Pembulatan")]),t._v(" "),a("td",{staticClass:"nowrap-table py-1"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-1 text-left"},[t._v(" Rp. "+t._s(t._f("parse")(t.modalData.employee.pembulatan_salary||0,"number"))+" ")])]),t._v(" "),a("tr",[a("td",{staticClass:"nowrap-table py-1 pl-0"},[t._v("Selisih Pembulatan")]),t._v(" "),a("td",{staticClass:"nowrap-table py-1"},[t._v(":")]),t._v(" "),a("td",{staticClass:"py-1 text-left"},[t._v(" Rp. "+t._s(t._f("parse")(t.modalData.employee.selisih_pembulatan||0,"number"))+" ")])]),t._v(" "),t.modalData.employee.salary_calculated_by&&t.modalData.employee.salary_calculated_at?a("tr",[a("td",{staticClass:"font-size-sm font-italic text-right",attrs:{colspan:"3"}},[t._v("Dihitung Oleh "+t._s(t.modalData.employee.rel_salary_calculated_by)+" pada "+t._s(t._f("parse")(t.modalData.employee.salary_calculated_at,"longDateTime")))])]):t._e()],2),t._v(" "),a("div",{staticClass:"btn-actions"},[a("button",{staticClass:"btn btn-light-primary",attrs:{disabled:!t.mainData.status_overall},on:{click:function(e){return t.recountDetail()}}},[a("i",{staticClass:"ri-exchange-funds-line"}),t._v(" Hitung Ulang")]),t._v(" "),a("button",{directives:[{name:"print",rawName:"v-print",value:t.printConfig,expression:"printConfig"}],staticClass:"btn btn-light-danger",attrs:{disabled:!t.mainData.status_overall}},[a("i",{staticClass:"ri-printer-line"}),t._v(" Cetak PDF")]),t._v(" "),a("button",{staticClass:"btn btn-light-success",attrs:{disabled:!t.mainData.status_overall},on:{click:function(e){return t.downloadSlip(t.selectedPeriod)}}},[a("i",{staticClass:"ri-download-cloud-line"}),t._v(" Download")])])])])])]),t._v(" "),a("b-tab",{attrs:{title:"Kode Akun (FINA)"}},[a("div",{staticClass:"inner-tab p-5 mt-5"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-custom-header v-center table-bordered"},[t._l(t.modalData.listTree,function(e,n){return[e.children.length?[a("tr",{key:n+"-parent-list"},[a("th",{staticClass:"bg-light-primary",attrs:{colspan:4}},[t._v(t._s(e.name))])]),t._v(" "),t._l(e.children,function(e,i){return a("tr",{key:n+"-"+i+"-child-list"},[a("td",[t._v(t._s(e.rel_salary_component_id))]),t._v(" "),a("td",{staticClass:"nowrap-table text-center"},[t.finaAcountLoading[e.id]?a("b-spinner",{attrs:{label:"Loading..."}}):a("s-input",{attrs:{item:{nm:!0,label:null,defaultCaption:"Pilih Akun Penggajian (FINA)",type:"lookup-radio",validation:[],placeholder:"",api:"fina-salary-accounts",pointer:{label:"account_name",code:"id",display:["account_code","account_name","debit_kredit|status_code"]}}},on:{input:function(a){return t.updateAkunFINA(e)}},model:{value:e.fina_salary_account_id,callback:function(a){t.$set(e,"fina_salary_account_id",a)},expression:"c.fina_salary_account_id"}})],1)])})]:t._e()]})],2)])])])],1)],1):t._e()]},proxy:!0}],null,!1,2391373766)})],1)]:t._e()],2)])])},staticRenderFns:[]};var _=a("VU/8")(p,u,!1,function(t){a("fI4G")},"data-v-0d78e76c",null);e.default=_.exports},Oswe:function(t,e,a){
/*! dom-to-image-more 06-12-2021 */
!function(e){"use strict";var a={escape:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:n,mimeType:function(t){return t=n(t).toLowerCase(),function(){var t="application/font-woff",e="image/jpeg";return{woff:t,woff2:t,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:e,jpeg:e,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[t]||""},dataAsUrl:function(t,e){return"data:"+e+";base64,"+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(t){return t.toBlob?new Promise(function(e){t.toBlob(e)}):(e=t,new Promise(function(t){for(var a=h(e.toDataURL().split(",")[1]),n=a.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=a.charCodeAt(s);t(new Blob([i],{type:"image/png"}))}));var e},resolveUrl:function(t,e){var a=document.implementation.createHTMLDocument(),n=a.createElement("base");a.head.appendChild(n);var i=a.createElement("a");return a.body.appendChild(i),n.href=e,i.href=t,i.href},getAndEncode:function(t){return v.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime()),new Promise(function(e){var a,n,i=v.impl.options.httpTimeout,s=new XMLHttpRequest;function l(t){console.error(t),e("")}s.onreadystatechange=function(){var n;4===s.readyState&&(200===s.status?((n=new FileReader).onloadend=function(){var t=n.result.split(/,/)[1];e(t)},n.readAsDataURL(s.response)):a?e(a):l("cannot fetch resource: "+t+", status: "+s.status))},s.ontimeout=function(){a?e(a):l("timeout of "+i+"ms occured while fetching resource: "+t)},s.responseType="blob",s.timeout=i,v.impl.options.useCredentials&&(s.withCredentials=!0),s.open("GET",t,!0),s.send(),!v.impl.options.imagePlaceholder||(n=v.impl.options.imagePlaceholder.split(/,/))&&n[1]&&(a=n[1])})},uid:function(){var t=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+t++}}(),delay:function(t){return function(e){return new Promise(function(a){setTimeout(function(){a(e)},t)})}},asArray:function(t){for(var e=[],a=t.length,n=0;n<a;n++)e.push(t[n]);return e},escapeXhtml:function(t){return t.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(t){return"data:,"===t?Promise.resolve():new Promise(function(e,a){var n=new Image;v.impl.options.useCredentials&&(n.crossOrigin="use-credentials"),n.onload=function(){e(n)},n.onerror=a,n.src=t})},width:function(t){var e=i(t,"border-left-width"),a=i(t,"border-right-width");return t.scrollWidth+e+a},height:function(t){var e=i(t,"border-top-width"),a=i(t,"border-bottom-width");return t.scrollHeight+e+a}};function n(t){return(t=/\.([^\.\/]*?)(\?|$)/g.exec(t))?t[1]:""}function i(t,e){return e=f(t).getPropertyValue(e),parseFloat(e.replace("px",""))}var s,l={inlineAll:function(t,e,a){return r(t)?Promise.resolve(t).then(o).then(function(n){var i=Promise.resolve(t);return n.forEach(function(t){i=i.then(function(n){return c(n,t,e,a)})}),i}):Promise.resolve(t)},shouldProcess:r,impl:{readUrls:o,inline:c}};function r(t){return-1!==t.search(s)}function o(t){for(var e,n=[];null!==(e=s.exec(t));)n.push(e[1]);return n.filter(function(t){return!a.isDataUrl(t)})}function c(t,e,n,i){return Promise.resolve(e).then(function(t){return n?a.resolveUrl(t,n):t}).then(i||a.getAndEncode).then(function(t){return a.dataAsUrl(t,a.mimeType(e))}).then(function(n){return t.replace(new RegExp("(url\\(['\"]?)("+a.escape(e)+")(['\"]?\\))","g"),"$1"+n+"$3")})}var d={resolveAll:function(){return p().then(function(t){return Promise.all(t.map(function(t){return t.resolve()}))}).then(function(t){return t.join("\n")})},impl:{readAll:p}};function p(){return Promise.resolve(a.asArray(document.styleSheets)).then(function(t){var e=[];return t.forEach(function(t){if(Object.getPrototypeOf(t).hasOwnProperty("cssRules"))try{a.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(e){console.log("Error while reading CSS rules from "+t.href,e.toString())}}),e}).then(function(t){return t.filter(function(t){return t.type===CSSRule.FONT_FACE_RULE}).filter(function(t){return l.shouldProcess(t.style.getPropertyValue("src"))})}).then(function(e){return e.map(t)});function t(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return l.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}var u={inlineAll:function t(e){return e instanceof Element?function(t){var e=t.style.getPropertyValue("background");return e?l.inlineAll(e).then(function(a){t.style.setProperty("background",a,e)}).then(function(){return t}):Promise.resolve(t)}(e).then(function(){return e instanceof HTMLImageElement?_(e).inline():Promise.all(a.asArray(e.childNodes).map(function(e){return t(e)}))}):Promise.resolve(e)},impl:{newImage:_}};function _(t){return{inline:function(e){return a.isDataUrl(t.src)?Promise.resolve():Promise.resolve(t.src).then(e||a.getAndEncode).then(function(e){return a.dataAsUrl(e,a.mimeType(t.src))}).then(function(e){return new Promise(function(a){t.onload=a,t.onerror=a,t.src=e})})}}}var m={imagePlaceholder:void 0,cacheBust:!(s=/url\(['"]?([^'"]+?)['"]?\)/g),useCredentials:!1,httpTimeout:3e4},v={toSvg:y,toPng:function(t,e){return(e=e||{}).raster=!0,g(t,e).then(function(t){return t.toDataURL()})},toJpeg:function(t,e){return(e=e||{}).raster=!0,g(t,e).then(function(t){return t.toDataURL("image/jpeg",e.quality||1)})},toBlob:function(t,e){return(e=e||{}).raster=!0,g(t,e).then(a.canvasToBlob)},toPixelData:function(t,e){return(e=e||{}).raster=!0,g(t,e).then(function(e){return e.getContext("2d").getImageData(0,0,a.width(t),a.height(t)).data})},toCanvas:function(t,e){return g(t,e||{})},impl:{fontFaces:d,images:u,util:a,inliner:l,options:{}}};t.exports=v;const f=e.getComputedStyle||window.getComputedStyle,h=e.atob||window.atob;function y(t,e){return void 0===(n=e=e||{}).imagePlaceholder?v.impl.options.imagePlaceholder=m.imagePlaceholder:v.impl.options.imagePlaceholder=n.imagePlaceholder,void 0===n.cacheBust?v.impl.options.cacheBust=m.cacheBust:v.impl.options.cacheBust=n.cacheBust,void 0===n.useCredentials?v.impl.options.useCredentials=m.useCredentials:v.impl.options.useCredentials=n.useCredentials,Promise.resolve(t).then(function(t){return function t(e,n,i,s){return i||!n||n(e)?Promise.resolve(e).then(function(t){return t instanceof HTMLCanvasElement?a.makeImage(t.toDataURL()):"IFRAME"===t.nodeName?html2canvas(t.contentDocument.body).then(t=>t.toDataURL()).then(a.makeImage):t.cloneNode(!1)}).then(function(i){return function(e,i){return 0===(e=e.childNodes).length?Promise.resolve(i):function(e,a){var i=Promise.resolve();return a.forEach(function(a){i=i.then(function(){return t(a,n,!1,s)}).then(function(t){t&&e.appendChild(t)})}),i}(i,a.asArray(e)).then(function(){return i})}(e,i)}).then(function(t){return function(t,e,n){return e instanceof Element?Promise.resolve().then(function(){!function(t,e){t.cssText?(e.cssText=t.cssText,function(t,e){e.font=t.font,e.fontFamily=t.fontFamily,e.fontFeatureSettings=t.fontFeatureSettings,e.fontKerning=t.fontKerning,e.fontSize=t.fontSize,e.fontStretch=t.fontStretch,e.fontStyle=t.fontStyle,e.fontVariant=t.fontVariant,e.fontVariantCaps=t.fontVariantCaps,e.fontVariantEastAsian=t.fontVariantEastAsian,e.fontVariantLigatures=t.fontVariantLigatures,e.fontVariantNumeric=t.fontVariantNumeric,e.fontVariationSettings=t.fontVariationSettings,e.fontWeight=t.fontWeight}(t,e)):function(t,n){a.asArray(t).forEach(function(e){n.setProperty(e,t.getPropertyValue(e),t.getPropertyPriority(e))}),i&&(["inset-block","inset-block-start","inset-block-end"].forEach(t=>e.removeProperty(t)),["left","right","top","bottom"].forEach(t=>{e.getPropertyValue(t)&&e.setProperty(t,"0px")}))}(t,e)}(n?function(t,e){var a,n=document.createElement(t.tagName).style,i=f(t),s=t.style;for(a of i){var l=i.getPropertyValue(a),r=s.getPropertyValue(a);s.setProperty(a,e?"initial":"unset"),i.getPropertyValue(a)!==l?n.setProperty(a,l):n.removeProperty(a),s.setProperty(a,r)}return n}(t,i):f(t),e.style)}).then(function(){[":before",":after"].forEach(function(n){!function(n){var i,s=f(t,n),l=s.getPropertyValue("content");""!==l&&"none"!==l&&(i=a.uid(),(l=e.getAttribute("class"))&&e.setAttribute("class",l+" "+i),(l=document.createElement("style")).appendChild(function(){var t="."+i+":"+n,e=(s.cssText?function(){return s.cssText+" content: "+s.getPropertyValue("content")+";"}:function(){return a.asArray(s).map(function(t){return t+": "+s.getPropertyValue(t)+(s.getPropertyPriority(t)?" !important":"")}).join("; ")+";"})();return document.createTextNode(t+"{"+e+"}")}()),e.appendChild(l))}(n)})}).then(function(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}).then(function(){e instanceof SVGElement&&(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e instanceof SVGRectElement&&["width","height"].forEach(function(t){var a=e.getAttribute(t);a&&e.style.setProperty(t,a)}))}).then(function(){return e}):e}(e,t,s)}):Promise.resolve()}(t,e.filter,!0,!e.raster)}).then(b).then(w).then(function(t){e.bgcolor&&(t.style.backgroundColor=e.bgcolor),e.width&&(t.style.width=e.width+"px"),e.height&&(t.style.height=e.height+"px"),e.style&&Object.keys(e.style).forEach(function(a){t.style[a]=e.style[a]});var a=null;return"function"==typeof e.onclone&&(a=e.onclone(t)),Promise.resolve(a).then(function(){return t})}).then(function(n){return n=n,i=e.width||a.width(t),s=e.height||a.height(t),Promise.resolve(n).then(function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)}).then(a.escapeXhtml).then(function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"}).then(function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+i+'" height="'+s+'">'+t+"</svg>"}).then(function(t){return"data:image/svg+xml;charset=utf-8,"+t});var i,s});var n}function g(t,e){return y(t,e).then(a.makeImage).then(a.delay(0)).then(function(n){var i="number"!=typeof e.scale?1:e.scale,s=function(t,n){var i=document.createElement("canvas");return i.width=(e.width||a.width(t))*n,i.height=(e.height||a.height(t))*n,e.bgcolor&&((n=i.getContext("2d")).fillStyle=e.bgcolor,n.fillRect(0,0,i.width,i.height)),i}(t,i),l=s.getContext("2d");return l.mozImageSmoothingEnabled=!1,l.msImageSmoothingEnabled=!1,l.imageSmoothingEnabled=!1,n&&(l.scale(i,i),l.drawImage(n,0,0)),s})}function b(t){return d.resolveAll().then(function(e){var a=document.createElement("style");return t.appendChild(a),a.appendChild(document.createTextNode(e)),t})}function w(t){return u.inlineAll(t).then(function(){return t})}}(this)},fI4G:function(t,e){}});
//# sourceMappingURL=53.996fb88d1e0e47f186d3.js.map