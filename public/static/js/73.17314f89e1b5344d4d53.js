webpackJsonp([73],{txQH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Dd8w"),i=a.n(s),l=a("Xxa5"),n=a.n(l),o=a("woOf"),d=a.n(o),r=a("exGp"),c=a.n(r),p={name:"crud-potongan-sanksi-details",data:function(){return{modalData:{},mainKey:0,config:{title:"Data Sanksi Tenaga Kerja",model_api:null,getter:"custom/potongan-sanksi-details",setter:"potongan-sanksi-details",pk_field:"name",filter_api:{},custom_api:{create:"custom/potongan-sanksi-details"},permission:{create:"create-potongan-sanksi-details",read:"view-potongan-sanksi-details",update:"update-potongan-sanksi-details",delete:"delete-potongan-sanksi-details"},slave:[],fields:[{id:"id",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"updated_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_at",label:"Dibuat",methods:{create:!1,update:!1,filter:!1}},{id:"updated_at",label:"Diperbarui",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"status_code",data:"status_code",label:"Status",placeholder:null,methods:{list:{order:!0,class:{not_calculated_yet:"badge badge-danger",calculated:"badge badge-primary"},transform:"calculated"},detail:{order:!0,class:{not_calculated_yet:"badge badge-danger",calculated:"badge badge-primary"},transform:"calculated"},create:!1,update:{view_data:"status_code",type:"radio",value:"calculated",option:{list_pointer:{label:"label",code:"code",list:[{label:"Sudah dihitung",code:"calculated"},{label:"Belum dihitung",code:"not_calculated_yet"}]}}},filter:{view_data:"status_code",type:"radio",option:{list_pointer:{label:"label",code:"code",list:[{label:"Sudah dihitung",code:"calculated"},{label:"Belum dihitung",code:"not_calculated_yet"}]}}}}},{id:"employee_id",label:"Nama Tenaga Kerja",methods:{list:{view_data:"rel_employee_id"},create:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}},update:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}},filter:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}}}},{id:"job_position_id",label:"Jabatan",methods:{list:{view_data:"rel_job_position_id"},create:!1,update:{setter:"job-positions",getter:"job-positions",type:"lookup-radio",option:{list_pointer:{label:"job_position_name",code:"id",display:["job_position_name"]}}},filter:{setter:"job-positions",getter:"job-positions",type:"lookup-radio",option:{list_pointer:{label:"job_position_name",code:"id",display:["job_position_name"]}}}}},{id:"status_employment_id",label:"Status Ketenagakerjaan",methods:{list:{view_data:"rel_status_employment_id",show:!0},create:!1,update:{setter:"custom/master-status-employments",getter:"custom/master-status-employments",type:"lookup-radio",option:{list_pointer:{label:"name",code:"id",display:["name"]},get_param:[{id:"job_position_id"}]}},filter:{setter:"custom/master-status-employments",getter:"custom/master-status-employments",type:"lookup-radio",option:{list_pointer:{label:"name",code:"id",display:["name"]},get_param:[{id:"job_position_id"}]}}}},{id:"potongan_value",label:"Potongan",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"description",label:"Deskripsi",methods:{create:{type:"textarea"},update:{type:"textarea"}}}]}}},watch:{mainKey:{immediate:!1,deep:!1,handler:function(t){this.$refs["sub-module"].$children[1].getData()}}},methods:{assignValue:function(t){t.active?t.component_value=t.base_payment_value:t.component_value=0},openModal:function(t,e){var a=this;return c()(n.a.mark(function s(){var i;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,a.getDetail("get","custom/potongan-sanksi-details/show",{id:e.rowData.id});case 2:s.t0=s.sent,i={detail:s.t0},a.modalData=d()({},i,e.rowData),a.$nextTick().then(function(e){a.$bvModal.show(t)});case 6:case"end":return s.stop()}},s,a)}))()},getDetail:function(t,e,a){var s=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.$_api[t](e,a).then(function(t){return i&&t.data[i]||t.data}).catch(function(t){s.$_alert.error(t)})},copyValue:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.$set(this.modalData,"detail",i()({},this.modalData.detail,this.modalData.sync.data_recaps))},getDatasets:function(t,e){var a=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.$_api.dataset(t,e).then(function(t){return s&&t.data[s]||t.data}).catch(function(t){a.$_alert.error(t)})},submitData:function(){var t=this,e=this.config.getter+"/calculate";this.$_api.post(e,this.modalData.detail).then(function(e){t.$_alert.success(null,"Detail Rincian berhasil diperbarui"),t.$set(t.modalData,"detail",e.data),t.mainKey++}).catch(function(e){t.$_alert.error(e)})}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tas-base-crud",{ref:"sub-module",attrs:{config:t.config,"hide-update":"","hide-filter":"","hide-detail":""},scopedSlots:t._u([{key:"list-table-action",fn:function(e){return[a("a",{staticClass:"btn btn-info btn-sm",on:{click:function(a){return t.openModal("modal-rincian-beasiswa",e)}}},[t._v("Lihat Detail")])]}},{key:"list-header",fn:function(){return[t.modalData.detail?a("b-modal",{attrs:{"header-class":"pb-1",id:"modal-rincian-beasiswa","hide-footer":"",size:"xl"},scopedSlots:t._u([{key:"modal-header",fn:function(){return[a("div",{staticClass:"d-flex justify-content-between flex-fill"},[a("div",{staticClass:"d-flex flex-column flex-fill"},[a("div",{staticClass:"text-center mb-5"},[a("h5",{staticClass:"mb-1 font-weight-bold"},[t._v("Detail "+t._s(t.config.title))]),t._v(" "),a("span",{staticClass:"font-weight-bolder"},[t._v("Periode "+t._s(t._f("parse")(t.modalData.detail.periode_month,"period")))])]),t._v(" "),a("table",{staticClass:"table no-border mb-0"},[a("tr",[a("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("Tenaga Kerja")]),t._v(" "),a("td",{staticClass:"pt-0 pr-0 nowrap-table"},[t._v(": "+t._s(t.modalData.rel_employee_id))]),t._v(" "),a("td",{}),t._v(" "),a("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("Jabatan")]),t._v(" "),a("td",{staticClass:"pt-0 pr-0 nowrap-table"},[t._v(": "+t._s(t.modalData.detail.rel_job_position_id))])]),t._v(" "),a("tr",[a("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("MPP")]),t._v(" "),a("td",{staticClass:"pt-0 pr-0 nowrap-table"},[t._v(": "+t._s(t._f("parse")(t.modalData.detail.is_mpp,"ynBool")))]),t._v(" "),a("td",{}),t._v(" "),a("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("Status Ketenagakerjaan")]),t._v(" "),a("td",{staticClass:"pt-0 pr-0 nowrap-table"},[t._v(": "+t._s(t.modalData.detail.rel_status_employment_id))])])])])])]},proxy:!0}],null,!1,3986434827)},[t._v(" "),a("div",{staticClass:"tables-responsive"},[a("table",{staticClass:"table table-header-custom v-center"},[a("thead",[a("tr",[a("th",[t._v("Sanksi Tenaga Kerja")]),t._v(" "),a("th",{staticClass:"nowrap-table"},[t._v("Sudah Dibayarkan")]),t._v(" "),a("th",{staticClass:"nowrap-table"},[t._v("Nilai Dasar Perbulan")]),t._v(" "),a("th",{staticClass:"nowrap-table"},[t._v("Sisa Nilai Sanksi")]),t._v(" "),a("th",[t._v("Pembayaran Bulan ini")])])]),t._v(" "),a("tbody",[t.modalData.detail.data_potongan_sanksi_components.length?t._l(t.modalData.detail.data_potongan_sanksi_components,function(e,s){return a("tr",{key:s+"-data-employee"},[a("td",[a("label",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.active,expression:"e.active"}],attrs:{type:"checkbox","true-value":1,"false-value":0},domProps:{checked:Array.isArray(e.active)?t._i(e.active,null)>-1:t._q(e.active,1)},on:{change:[function(a){var s=e.active,i=a.target,l=i.checked?1:0;if(Array.isArray(s)){var n=t._i(s,null);i.checked?n<0&&t.$set(e,"active",s.concat([null])):n>-1&&t.$set(e,"active",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(e,"active",l)},function(a){return t.assignValue(e)}]}}),t._v(" "),a("span",{staticClass:"mr-3"}),t._v(" "),a("div",[a("span",[t._v(t._s(e.rel_sanksi_type_id))]),t._v(" "),a("div",{staticClass:"text-line-2 max-w-200px font-size-sm"},[t._v(t._s(e.sanksi_description))]),t._v(" "),a("div",{staticClass:"d-flex justify-content-between"},[a("span",{},[t._v("Rp.")]),t._v(" "),a("span",{staticClass:"text-right font-weight-bold"},[t._v(t._s(t._f("parse")(e.sanksi_value,"number")))])])])])]),t._v(" "),a("td",[t._v(t._s(t._f("parse")(e.count_payment,"number"))+" Kali")]),t._v(" "),a("td",[a("div",{staticClass:"d-flex justify-content-between"},[a("span",{},[t._v("Rp.")]),t._v(" "),a("span",{staticClass:"text-right font-weight-bold"},[t._v(t._s(t._f("parse")(e.base_payment_value,"number")))])])]),t._v(" "),a("td",[a("div",{staticClass:"d-flex justify-content-between"},[a("span",{},[t._v("Rp.")]),t._v(" "),a("span",{staticClass:"text-right font-weight-bold"},[t._v(t._s(t._f("parse")(e.remaining_sanksi_value,"number")))])])]),t._v(" "),e.active?[a("td",{staticClass:"bg-light-primary",staticStyle:{width:"25%"}},[a("s-input",{attrs:{item:{type:"number",validation:[],label:null,prefix:"Rp. ",groupClass:"mb-0",ic:"w-100 mr-1",api:"",attr:{precision:2}}},model:{value:e.component_value,callback:function(a){t.$set(e,"component_value",a)},expression:"e.component_value"}})],1)]:a("td",{staticClass:"nowrap-table",staticStyle:{width:"25%"}},[a("div",{staticClass:"d-flex justify-content-between"},[a("span",{},[t._v("Rp.")]),t._v(" "),a("span",{staticClass:"text-right font-weight-bold"},[t._v(t._s(t._f("parse")(e.component_value,"number")))])])])],2)}):a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"5"}},[a("p",{staticClass:"mb-0"},[t._v("Tidak ada Sanksi yang terdaftar")])])]),t._v(" "),a("tr",[a("th",{staticClass:"text-right text-uppercase",attrs:{colspan:"4"}},[t._v("Jumlah Pembayaran")]),t._v(" "),a("th",[a("div",{staticClass:"d-flex justify-content-between"},[a("span",{},[t._v("Rp.")]),t._v(" "),a("span",{staticClass:"text-right font-weight-bolder"},[t._v(t._s(t._f("parse")(t.modalData.detail.potongan_value||0,"number")))])])])])],2)])]),t._v(" "),a("div",{staticClass:"mt-5"},[a("button",{staticClass:"btn btn-primary btn-lg btn-block font-size-md",on:{click:function(e){return t.submitData("modal-rincian-bills")}}},[t._v("Perbarui & Simpan")])])]):t._e()]},proxy:!0}])})},staticRenderFns:[]},u=a("VU/8")(p,_,!1,null,null,null);e.default=u.exports}});
//# sourceMappingURL=73.17314f89e1b5344d4d53.js.map