webpackJsonp([19],{"/nME":function(t,a){},vn35:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("Dd8w"),s=e.n(i),n=e("mvHQ"),l=e.n(n),r=e("Xxa5"),o=e.n(r),c=e("fZjL"),d=e.n(c),p=e("exGp"),u=e.n(p),m=e("woOf"),_=e.n(m),v=e("PJh5"),b=e.n(v);b.a.locale("id");var f={name:"crud-output-pll-bll-ljo",data:function(){return{isLoading:!1,fullscreen:!1,config:{title:"Proses IS-BS-CF",permission:{create:"create-auction-plans",read:"view-auction-plans",update:"do-verification-request-auction-plans",delete:"delete-auction-plans"}},momentFormat:{stringify:function(t){return t?b()(t).format("YYYY"):""},parse:function(t){return t?b()(t,"YYYY").toDate():null}},searchFilter:"",globalFilter:{},mainData:null,mainForm:{division_id:{label:null,code:null},periode_year:b()().set("date",1).set("month",0).format("YYYY"),agenda_id:{label:null,code:null},scenario_input:{label:null,code:null}},moduleList:[{code:"custom/output-rincian-pll",label:"Pendapatan Lain lain"},{code:"custom/output-rincian-bll",label:"Biaya Lain lain"},{code:"custom/output-rincian-ljo",label:"Laba JO"}],datasetList:{division:{api:"divisions",param:{sort:"ASC",sort_by:"division_id"},option:{label:"division_name",code:"id"},data:[],target:"division_id"},agenda:{api:null,param:null,option:null,data:[],target:null},scenario:{api:null,param:null,option:null,data:[{code:"pesimist",label:"Skenario Pesimis"},{code:"moderate",label:"Skenario Moderat"},{code:"optimist",label:"Skenario Optimis"}],target:null}},isUploading:!1,uploadMax:1,uploadLimitExceed:!1,uploadError:null,uploadPercentage:0,tableConfig:[{data:"division_name",label:"Uraian",money:!1,pipe:"uppercase",class:"nowrap-table sl min-w-250px"},{data:"division_code",label:"Kode",money:!1,class:"nowrap-table text-center",action:!0},{data:"data_series_months",label:"periode_month",multiple:"longMonth",money:!0,pipe:"number"}]}},watch:{mainForm:{deep:!0,immediate:!1,handler:function(t){t&&t.division_id.code&&(this.globalFilter=_()({},this.globalFilter,{agenda_id:t.agenda_id.code,division_id:t.division_id.code,periode_year:b()(b()(t.periode_year,"YYYY").toDate()).format("YYYY-MM-DD"),scenario_input:t.scenario_input.code}))}},globalFilter:{deep:!0,immediate:!1,handler:function(t){t&&this.getMainData(t)}}},mounted:function(){this.$_sys.togleClass("kt_body","aside-minimize",!0),this.$store.commit("set",["sideNavSecondary",!1]),this.getDataset()},methods:{readClass:function(t,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i="";return 0===t&&(i+="font-weight-bolder font-size-lg "),"static"!==a||e||(i+="text-primary font-weight-bold "),"percent"!==a&&"checker"!==a||(i+="text-danger text-italic "),e&&(i+="bg-primary text-white "),e||0!==t||"percent"===a||"checker"===a||(i+="bg-light-muted text-dark"),i},staticDataset:function(){for(var t=[],a=0;a<13;a++){var e=-Math.abs(a);t.push({label:0===a?"RKAP":"Stress Test "+b()().set("date",1).set("month",a-1).format("MMMM"),code:0===a?a:e})}this.$set(this.datasetList.agenda,"data",t),this.$set(this.mainForm,"agenda_id",t[0]),this.$set(this.mainForm,"scenario_input",this.datasetList.scenario.data[1])},getDataset:function(){var t=this;return u()(o.a.mark(function a(){var e,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.staticDataset();case 2:for(e=function(a){var e=d()(t.datasetList)[a];t.datasetList[e].api&&t.$_api.dataset(t.datasetList[e].api,t.datasetList[e].param).then(function(a){var i=a.data.map(function(a){return{label:a[t.datasetList[e].option.label],code:a[t.datasetList[e].option.code]}});t.$set(t.datasetList[e],"data",i),t.datasetList[e].target&&i.length&&t.$set(t.mainForm,t.datasetList[e].target,i[0])},function(a){t.$_alert.error(a)})},i=0;i<d()(t.datasetList).length;i++)e(i);case 4:case"end":return a.stop()}},a,t)}))()},formatDate:function(t){var a=void 0;switch(t){case"date":case"date-range":a="YYYY-MM-DD";break;case"datetime":case"datetime-range":a="YYYY-MM-DD HH:mm:ss";break;case"year":case"year-range":a="YYYY";break;case"month":case"month-range":a="YYYY-MM-DD";break;case"time":case"time-range":a="HH:mm:ss";break;case"week":case"week-range":a="DD"}return a},getMainData:function(t){var a=this;return u()(o.a.mark(function e(){var i,n,r,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.isLoading=!0,(i=JSON.parse(l()(t))).scenario_input=0===i.agenda_id?"rkap":i.scenario_input,n=[],r=o.a.mark(function t(e){var l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return l=a.moduleList[e],t.next=3,a.$_api.dataset(l.code,i).then(function(t){n.push(s()({},t,{label:l.label})),a.mainData=t},function(t){a.$_alert.error(t)});case 3:case"end":return t.stop()}},t,a)}),c=0;case 6:if(!(c<a.moduleList.length)){e.next=11;break}return e.delegateYield(r(c),"t0",8);case 8:c++,e.next=6;break;case 11:a.mainData=n,a.isLoading=!1;case 13:case"end":return e.stop()}},e,a)}))()}}},g={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"row mb-3"},[e("div",{staticClass:"col-4 pr-0"},[e("div",{staticClass:"card card-custom card-stretch"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col-12 mb-5"},[e("span",{staticClass:"d-block mb-2 font-weight-bolder",attrs:{for:""}},[t._v("Pilih Divisi / AP")]),t._v(" "),e("v-select",{staticClass:"vs-style custom",attrs:{disabled:!1,clearable:!1,appendToBody:!0,options:t.datasetList.division.data,placeholder:"Pilih salah satu Divisi"},model:{value:t.mainForm.division_id,callback:function(a){t.$set(t.mainForm,"division_id",a)},expression:"mainForm.division_id"}},[t._t("no-options",function(){return[t._v(t._s(t.$t("error.no_data")))]})],2)],1),t._v(" "),e("div",{staticClass:"form-group col-12 mb-0"},[e("span",{staticClass:"d-block mb-2 font-weight-bolder",attrs:{for:""}},[t._v("Tahun")]),t._v(" "),e("date-picker",{attrs:{clearable:!1,"input-attr":{autocomplete:"off"},type:"year","input-class":"form-control custom-dateyears","value-type":t.formatDate("year"),formatter:t.momentFormat},model:{value:t.mainForm.periode_year,callback:function(a){t.$set(t.mainForm,"periode_year",a)},expression:"mainForm.periode_year"}})],1)])])])]),t._v(" "),e("div",{staticClass:"col"},[e("div",{staticClass:"card card-custom card-stretch"},[e("div",{staticClass:"card-body py-5 pr-5"},[e("div",{staticClass:"row no-gutters align-items-center"},[e("div",{staticClass:"col p-0"},[e("div",{staticClass:"form-group mb-5"},[e("span",{staticClass:"d-block mb-2 font-weight-bolder",attrs:{for:""}},[t._v("Pilih Agenda Input")]),t._v(" "),e("v-select",{staticClass:"vs-style custom",attrs:{disabled:!1,clearable:!1,appendToBody:!0,options:t.datasetList.agenda.data,placeholder:"Pilih salah satu Agenda"},model:{value:t.mainForm.agenda_id,callback:function(a){t.$set(t.mainForm,"agenda_id",a)},expression:"mainForm.agenda_id"}},[t._t("no-options",function(){return[t._v(t._s(t.$t("error.no_data")))]})],2)],1),t._v(" "),e("div",{staticClass:"form-group mb-0"},[e("span",{staticClass:"d-block mb-1 font-weight-bolder",attrs:{for:""}},[t._v("Pilih Skenario Input")]),t._v(" "),e("div",{staticClass:"checkbox-inline position-relative py-2"},[e("b-overlay",{attrs:{"no-wrap":"",show:0===t.globalFilter.agenda_id,rounded:"sm",opacity:.95},scopedSlots:t._u([{key:"overlay",fn:function(){return[e("div",{staticClass:"d-flex flex-fill align-items-center justify-content-center font-weight-bold min-w-350px"},[e("i",{staticClass:"ri-lock-line ri-2x font-weight-bold text-danger"}),t._v(" "),e("span",{staticClass:"flex-fill pl-2"},[t._v("Tidak ada Skenario Input di RKAP")])])]},proxy:!0}])}),t._v(" "),t._l(t.datasetList.scenario.data,function(a,i){return e("label",{key:i+"-form-a",staticClass:"checkbox checkbox-lg checkbox-outline mb-1"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.mainForm.scenario_input,expression:"mainForm.scenario_input"}],attrs:{disabled:0===t.globalFilter.agenda_id,type:"radio"},domProps:{value:a,checked:t._q(t.mainForm.scenario_input,a)},on:{change:function(e){return t.$set(t.mainForm,"scenario_input",a)}}}),t._v(" "),e("span"),t._v(t._s(a.label))])})],2)])])])])])])]),t._v(" "),e("div",{staticClass:"position-relative",class:t.fullscreen?"fullscreen-component":""},[e("b-overlay",{attrs:{"no-wrap":"",show:t.isLoading,rounded:"sm"}}),t._v(" "),e("div",{staticClass:"card card-custom"},[e("div",{staticClass:"card-header border-0 p-5",staticStyle:{"min-height":"50px"}},[e("div",{staticClass:"d-flex flex-fill flex-wrap align-items-center justify-content-between"},[e("div",{staticClass:"flex-fill"}),t._v(" "),e("div",{staticClass:"d-flex flex-wrap align-items-center"},[e("a",{staticClass:"btn btn-link text-primary mr-2",on:{click:function(a){t.fullscreen=!t.fullscreen}}},[e("i",{staticClass:"text-primary",class:t.fullscreen?"ri-fullscreen-exit-line":"ri-fullscreen-line"}),t._v(" Full Screen ")])])])]),t._v(" "),e("div",{staticClass:"card-body px-5 pt-0 pb-0"},[t.mainData?e("div",{staticClass:"table-responsive mb-0"},[t.mainData.length?e("table",{staticClass:"table table-head-custom table-bordered table-vertical-center table-input"},[e("thead",[e("tr",{staticClass:"bg-light-info"},[t._l(t.tableConfig,function(a,i){return[a.multiple?t._l(t.mainData[0].data[0][a.data],function(s,n){return e("th",{key:n+"-"+i+"-thead-config",staticClass:"nowrap-table min-w-150px text-center",class:t.globalFilter.agenda_id===-Math.abs(n+1)?"bg-primary-primary":"",staticStyle:{color:"#000 !important"}},[t._v(" "+t._s(t._f("parse")(s[a.label],a.multiple))+" "),0!==t.globalFilter.agenda_id?e("span",{staticClass:"font-size-xs d-block text-info"},[t._v(t._s(Math.abs(t.globalFilter.agenda_id)>=n+1?"Actual":"Forecast"))]):t._e()])}):e("th",{key:i+"-header-table",staticClass:"text-center",class:a.class,staticStyle:{color:"#000 !important"},domProps:{innerHTML:t._s(a.label)}})]})],2)]),t._v(" "),e("tbody",[t._l(t.mainData,function(a,i){return[e("tr",{key:i+"-tr-separator"},[e("td",{staticClass:"sl font-size-h4 font-weight-bolder bg-dark text-light text-italic"},[t._v(t._s(a.label))]),t._v(" "),e("td",{staticClass:"bg-dark",attrs:{colspan:"13"}})]),t._v(" "),t._l(a.data,function(s,n){return[null!==s.component_parent_id&&"Cash Flow"===a.label&&a.data[n>0?n-1:0].cash_type!==s.cash_type?e("tr",{key:n+"-cf-type"},[e("td",{staticClass:"text-left sl bg-light-muted text-dark text-capitalize font-weight-bolder"},[t._v(t._s(s.cash_type?s.cash_type.split("_").join(" "):"Cash Type NULL")+":")]),t._v(" "),e("td",{staticClass:"text-left bg-light-muted text-dark",attrs:{colspan:t.tableConfig.length+10}})]):t._e(),t._v(" "),e("tr",{key:i+"-"+n+"-tr-body"},[t._l(t.tableConfig,function(a,i){return[a.multiple?t._l(s[a.data],function(l,r){return e("td",{key:r+"-"+n+"-"+i+"-td-input-table",staticClass:"nowrap-table",class:[t.readClass(s.level,s.type_component,s.has_backgroud)]},["checker"===s.type_component?[e("div",{staticClass:"d-block text-center"},[l.value?e("i",{staticClass:"flaticon2-check-mark text-success"}):t._e()])]:"percent"===s.type_component?[l.value?e("div",{staticClass:"d-block text-right"},[e("span",[t._v(t._s(t._f("parse")(l.value,a.pipe))+"%")])]):e("div",{staticClass:"d-block text-center"},[e("span",[t._v("-")])])]:[l.value?e("div",{staticClass:"d-flex align-items-center justify-content-between px-0"},[e("span",{staticClass:"pr-3"},[t._v("Rp.")]),t._v(" "),l.value<0?e("span",[t._v("("+t._s(t._f("parse")(l.value,a.pipe))+")")]):e("span",{staticClass:"pr-2"},[t._v(t._s(t._f("parse")(l.value,a.pipe)))])]):e("div",{staticClass:"d-block text-center"},[e("span",[t._v("-")])])]],2)}):e("td",{key:n+"-"+i+"-td-input-table",class:[a.class||"nowrap-table",t.readClass(s.level,s.type_component,s.has_backgroud)]},[a.money?e("div",{staticClass:"d-flex align-items-center justify-content-between px-3"},[e("span",{staticClass:"pr-3"},[t._v("Rp.")]),t._v(" "),e("span",[t._v(t._s(t._f("parse")(s[a.data]||0,a.pipe)))])]):[t._v(" "+t._s(t._f("parse")(s[a.data],a.pipe))+" ")]],2)]})],2)]})]})],2)]):t._e()]):t._e()])])],1)])},staticRenderFns:[]};var h=e("VU/8")(f,g,!1,function(t){e("/nME")},"data-v-24948f1e",null);a.default=h.exports}});
//# sourceMappingURL=19.04269198f46908c3d0fd.js.map