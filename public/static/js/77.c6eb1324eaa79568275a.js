webpackJsonp([77],{"9gHG":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("mvHQ"),l=e.n(i),s=e("Xxa5"),o=e.n(s),n=e("woOf"),r=e.n(n),c=e("exGp"),d=e.n(c),u={name:"crud-mapping-salary-accounts-detail",data:function(){return{modalData:{},mainKey:0,isLoadingChecklist:!1,listChecklist:{page:1,search:"",filters:{},limit:5,total:0,totalPage:0,data:[]},formChecklist:[],config:{title:"Komponen Penggajian",model_api:null,getter:"custom/mapping-salary-accounts",setter:"custom/mapping-salary-accounts",pk_field:"name",filter_api:{},custom_api:{},permission:{create:"create-mapping-salary-accounts",read:"view-mapping-salary-accounts",update:"update-mapping-salary-accounts",delete:"delete-mapping-salary-accounts"},slave:[],fields:[{id:"id",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"updated_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_at",label:"Dibuat",methods:{create:!1,update:!1,filter:!1}},{id:"updated_at",label:"Diperbarui",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"name",label:"Nama Komponen",methods:{list:!0,detail:!0,create:!0,update:!0,filter:!1}},{id:"salary_component_category_id",label:"Kategori Komponen Gaji",methods:{list:{view_data:"rel_salary_component_category_id"},detail:{view_data:"rel_salary_component_category_id"},create:!1,update:!1,filter:{setter:"master-salary-component-categories",getter:"master-salary-component-categories",type:"lookup-radio",option:{list_pointer:{label:"name",code:"id",display:["name"]}}}}},{id:"fina_salary_account_id",label:"Akun Penggajian (FINA)",methods:{list:{view_data:"rel_fina_salary_account_id"},detail:{view_data:"rel_fina_salary_account_id"},create:{setter:"fina-salary-accounts",getter:"fina-salary-accounts",type:"lookup-radio",option:{list_pointer:{label:"account_name",code:"id",display:["account_name"]}}},update:{setter:"fina-salary-accounts",getter:"fina-salary-accounts",type:"lookup-radio",option:{list_pointer:{label:"account_name",code:"id",display:["account_name"]}}},filter:{setter:"fina-salary-accounts",getter:"fina-salary-accounts",type:"lookup-radio",option:{list_pointer:{label:"account_name",code:"id",display:["account_name"]}}}}},{id:"active",data:"active",label:"Status",placeholder:null,methods:{list:{order:!0,class:{0:"badge badge-danger",1:"badge badge-primary"},transform:"active"},detail:{order:!0,class:{0:"badge badge-danger",1:"badge badge-primary"},transform:"active"},create:{view_data:"active",type:"radio",value:"1",option:{list_pointer:{label:"label",code:"code",list:[{label:"Aktif",code:"1"},{label:"Non Aktif",code:"0"}]}}},update:{view_data:"active",type:"radio",value:"1",option:{list_pointer:{label:"label",code:"code",list:[{label:"Aktif",code:"1"},{label:"Non Aktif",code:"0"}]}}},filter:{view_data:"active",type:"radio",option:{list_pointer:{label:"label",code:"code",list:[{label:"Aktif",code:"1"},{label:"Non Aktif",code:"0"}]}}}}}]}}},watch:{mainKey:{immediate:!1,deep:!1,handler:function(t){this.$refs["sub-module"].$children[1].getData()}},"listChecklist.page":{deep:!1,immediate:!1,handler:function(t){this.getListAcount(t)}},"listChecklist.search":{deep:!1,immediate:!1,handler:function(t){this.getListAcount(1)}}},computed:{canSubmit:function(){return!0}},methods:{openModal:function(t,a){var e=this;return d()(o.a.mark(function i(){var l;return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.getDetail("get","custom/mapping-salary-accounts/show",{id:a.rowData.id,job_position_category_id:a.rowData.job_position_category_id,status_employment_id:a.rowData.status_employment_id});case 2:i.t0=i.sent,l={detail:i.t0},e.modalData=r()({},l,a.rowData),e.$set(e.listChecklist,"filters",{job_position_category_id:a.rowData.job_position_category_id,status_employment_id:a.rowData.status_employment_id,salary_component_id:a.rowData.id,active:null}),e.getListAcount(),e.$nextTick().then(function(a){e.$bvModal.show(t)});case 8:case"end":return i.stop()}},i,e)}))()},getDetail:function(t,a,e){var i=this,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.$_api[t](a,e).then(function(t){return l&&t.data[l]||t.data}).catch(function(t){i.$_alert.error(t)})},submitData:function(t){var a=this;this.$_api.update("custom/mapping-salary-account-proportions",t).then(function(t){a.$_alert.success(null,"Proporsi berhasil diperbarui"),a.$set(a.modalData,"detail",t.data),a.mainKey++}).catch(function(t){a.$_alert.error(t)})},updateStatus:function(t){var a=this,e=this.config.setter,i=JSON.parse(l()(this.modalData.detail));this.$_api.update(e,i).then(function(t){a.$_alert.success(null,"Status Komponen berhasil diperbarui"),a.mainKey++}).catch(function(t){a.$_alert.error(t)})},checkActive:function(t,a,e){0===a.active&&a.proportion_value>0&&(a.proportion_value=0,this.submitData(a))},getListAcount:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoadingChecklist=!0;var e={page:a,search:this.listChecklist.search||null,limit:this.listChecklist.limit,filters:this.listChecklist.filters};this.$_api.list("custom/mapping-salary-account-proportions",e).then(function(a){var i={page:e.page,search:e.search,total:a.total,filters:t.listChecklist.filters,limit:t.listChecklist.limit,totalPage:a.totalPage,data:a.data};t.listChecklist=r()({},i),t.isLoadingChecklist=!1}).catch(function(a){t.isLoadingChecklist=!1,t.$_alert.error(a)})}}},p={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("tas-base-crud",{ref:"sub-module",attrs:{config:t.config,"hide-create":"","hide-delete":"","hide-update":"","hide-filter":"","hide-detail":""},scopedSlots:t._u([{key:"list-table-action",fn:function(a){return[e("a",{staticClass:"btn btn-info btn-sm",on:{click:function(e){return t.openModal("modal-rincian-komponen",a)}}},[t._v("Konfigurasi Komponen")])]}},{key:"list-action",fn:function(){return[t.modalData&&t.modalData.detail?e("b-modal",{attrs:{id:"modal-rincian-komponen","hide-footer":"",centered:"",size:"xl",title:"Konfigurasi Komponen - "+t.modalData.detail.name}},[e("div",{staticClass:"d-flex justify-content-between align-items-start"},[e("div",{},[e("table",{staticClass:"table no-border mb-0"},[e("tr",[e("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("Kategori Komponen")]),t._v(" "),e("td",{staticClass:"pt-0 pr-0 nowrap-table"},[t._v(": "+t._s(t.modalData.detail.rel_salary_component_category_id))])]),t._v(" "),e("tr",[e("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("Jabatan")]),t._v(" "),e("td",{staticClass:"pt-0 pr-0 nowrap-table"},[t._v(": "+t._s(t.modalData.detail.rel_job_position_category_id)+" - "+t._s(t.modalData.detail.rel_status_employment_id))])])])]),t._v(" "),e("div",{staticClass:"form-group mb-0"},[e("label",[t._v("Status Komponen")]),t._v(" "),e("div",{staticClass:"radio-inline"},[e("label",{staticClass:"radio justify-content-start"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.detail.active,expression:"modalData.detail.active"}],attrs:{type:"radio","true-value":1,"false-value":0},domProps:{value:1,checked:t._q(t.modalData.detail.active,1)},on:{change:[function(a){return t.$set(t.modalData.detail,"active",1)},function(a){return t.updateStatus()}]}}),t._v(" "),e("span",{staticClass:"mr-2"}),t._v(" Komponen Aktif ")]),t._v(" "),e("label",{staticClass:"radio justify-content-start ml-5"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.detail.active,expression:"modalData.detail.active"}],attrs:{type:"radio","true-value":1,"false-value":0},domProps:{value:0,checked:t._q(t.modalData.detail.active,0)},on:{change:[function(a){return t.$set(t.modalData.detail,"active",0)},function(a){return t.updateStatus()}]}}),t._v(" "),e("span",{staticClass:"mr-2"}),t._v(" Komponen Nonaktif ")])])])]),t._v(" "),e("hr"),t._v(" "),e("b-overlay",{attrs:{show:!t.modalData.detail.active,rounded:"sm"},scopedSlots:t._u([{key:"overlay",fn:function(){return[e("div",{staticClass:"text-center"},[e("i",{staticClass:"ri-lock-2-fill ri-3x"}),t._v(" "),e("h2",{staticClass:"text-muted"},[t._v("Aktifkan komponen untuk mengatur proporsi akun keuangan (FINA)")])])]},proxy:!0}],null,!1,2853302837)},[t._v(" "),e("div",{staticClass:"d-flex mb-5"},[e("div",{staticClass:"mb-0"},[e("h5",{staticClass:"mb-0"},[t._v("Kode Akun (FINA)")]),t._v(" "),e("span",{staticClass:"text-muted font-size-sm"},[t._v("Pilih kode akun dan pastikan Total Persentase mencapai 100%")])]),t._v(" "),e("div",{staticClass:"d-flex flex-fill"},[e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.listChecklist.search,expression:"listChecklist.search",modifiers:{lazy:!0}}],staticClass:"form-control ml-5",attrs:{type:"text",name:"search",placeholder:"Cari Nama / Kode Akun"},domProps:{value:t.listChecklist.search},on:{change:function(a){return t.$set(t.listChecklist,"search",a.target.value)}}})])]),t._v(" "),t.listChecklist.data.length?[e("b-overlay",{attrs:{show:t.isLoadingChecklist,opacity:.9}},[e("table",{staticClass:"table table-head-custom table-vertical-center table-head-bg"},[e("thead",[e("tr",[e("th",[t._v("Kode Akun")]),t._v(" "),e("th",[t._v("Debit/Kredit")]),t._v(" "),e("th",{staticClass:"text-center max-w-50px"},[t._v("Proporsi")])])]),t._v(" "),e("tbody",t._l(t.listChecklist.data,function(a,i){return e("tr",{key:i+"-data-employee"},[e("td",[e("label",{staticClass:"checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:a.active,expression:"e.active",modifiers:{number:!0}}],attrs:{type:"checkbox","true-value":1,"false-value":0},domProps:{checked:Array.isArray(a.active)?t._i(a.active,null)>-1:t._q(a.active,1)},on:{change:[function(e){var i=a.active,l=e.target,s=l.checked?1:0;if(Array.isArray(i)){var o=t._n(null),n=t._i(i,o);l.checked?n<0&&t.$set(a,"active",i.concat([o])):n>-1&&t.$set(a,"active",i.slice(0,n).concat(i.slice(n+1)))}else t.$set(a,"active",s)},function(e){return t.checkActive(e,a,i)}]}}),t._v(" "),e("span",{staticClass:"mr-3"}),t._v(" "),e("div",{staticClass:"flex-fill"},[t._v(" "+t._s(a.account_name)+" "),e("span",{staticClass:"d-block font-size-sm font-weight-bold"},[t._v("Kode Akun: "+t._s(a.account_code))])])])]),t._v(" "),e("td",{staticClass:"text-uppercase nowrap-table text-center"},[t._v(" "+t._s(a.debit_kredit)+" ")]),t._v(" "),e("td",{staticClass:"text-center max-w-50px"},[1===a.active?e("input",{directives:[{name:"model",rawName:"v-model.lazy.number",value:a.proportion_value,expression:"e.proportion_value",modifiers:{lazy:!0,number:!0}}],staticClass:"form-control",attrs:{placeholder:"Proporsi",type:"number"},domProps:{value:a.proportion_value},on:{change:[function(e){t.$set(a,"proportion_value",t._n(e.target.value))},function(e){return t.submitData(a)}],blur:function(a){return t.$forceUpdate()}}}):e("i",{staticClass:"ri-lock-2-fill ri-2x"})])])}),0)]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("b-pagination",{staticClass:"mb-0",attrs:{size:"md","prev-text":"Sebelumnya","next-text":"Selanjutnya","hide-goto-end-buttons":"","total-rows":t.listChecklist.total,"per-page":t.listChecklist.limit},model:{value:t.listChecklist.page,callback:function(a){t.$set(t.listChecklist,"page",a)},expression:"listChecklist.page"}}),t._v(" "),e("span",[t._v("Total Proporsi "+t._s(t._f("parse")(t.modalData.detail.total_proportion_value||0,"number"))+"%")])],1)])]:t._e()],2)],1):t._e()]},proxy:!0}])})},staticRenderFns:[]},m=e("VU/8")(u,p,!1,null,null,null);a.default=m.exports}});
//# sourceMappingURL=77.c6eb1324eaa79568275a.js.map