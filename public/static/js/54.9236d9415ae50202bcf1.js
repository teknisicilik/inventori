webpackJsonp([54],{"0ECN":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("mvHQ"),n=e.n(i),l=e("Xxa5"),s=e.n(l),r=e("woOf"),o=e.n(r),d=e("exGp"),c=e.n(d),m={name:"crud-pinjaman-bank-details",data:function(){return{mainKey:1,modalData:{},summaryCard:[],config:{title:"Rincian Pinjaman Bank",model_api:"pinjaman-bank-details",getter:"pinjaman-bank-details",setter:"pinjaman-bank-details",custom_api:{create:"custom/pinjaman-bank-details"},pk_field:null,permission:{create:"create-pinjaman-bank-details",read:"view-pinjaman-bank-details",update:"update-pinjaman-bank-details",delete:"delete-pinjaman-bank-details"},slave:[],fields:[{id:"id",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"pinjaman_bank_id",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"updated_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_at",label:"Dibuat",methods:{create:!1,update:!1,filter:!1}},{id:"updated_at",label:"Diperbarui",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"description",label:"Deskripsi",methods:{create:{type:"textarea"},update:{type:"textarea"}}},{id:"pinjaman_value",label:"Jumlah Pinjaman",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"employee_id",label:"Nama Tenaga Kerja",methods:{create:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}},update:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}},filter:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}}}},{id:"status_code",data:"status_code",label:"Status",placeholder:null,methods:{list:{order:!0,class:{not_calculated_yet:"badge badge-danger",calculated:"badge badge-primary"},transform:"calculated"},detail:{order:!0,class:{not_calculated_yet:"badge badge-danger",calculated:"badge badge-primary"},transform:"calculated"},create:!1,update:{view_data:"status_code",type:"radio",value:"calculated",option:{list_pointer:{label:"label",code:"code",list:[{label:"Sudah dihitung",code:"calculated"},{label:"Belum dihitung",code:"not_calculated_yet"}]}}},filter:{view_data:"status_code",type:"radio",option:{list_pointer:{label:"label",code:"code",list:[{label:"Sudah dihitung",code:"calculated"},{label:"Belum dihitung",code:"not_calculated_yet"}]}}}}}]}}},watch:{mainKey:{immediate:!1,deep:!1,handler:function(t){this.$refs["sub-module"].$children[2].getData(),this.getSummaryCard()}}},mounted:function(){this.getSummaryCard()},methods:{openModal:function(t,a){var e=this;return c()(s.a.mark(function i(){var n;return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.getDetail("custom/pinjaman-bank-details/show",{id:a.rowData.id});case 2:return i.t0=i.sent,i.next=5,e.getDetail("custom/pinjaman-bank-details/show-month-before",{id:a.rowData.id});case 5:i.t1=i.sent,n={thisMonth:i.t0,beforeMonth:i.t1},e.modalData=o()({},n,a.rowData),e.$nextTick().then(function(a){e.$bvModal.show(t)});case 9:case"end":return i.stop()}},i,e)}))()},getDetail:function(t,a){var e=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.$_api.get(t,a).then(function(t){return i&&t.data[i]||t.data}).catch(function(t){e.$_alert.error(t)})},copyValue:function(t){var a=JSON.parse(n()(this.modalData.beforeMonth[t])),e=JSON.parse(n()(this.modalData.thisMonth[t]));console.log(a,e);for(var i=function(t){var i=a[t];delete i.pinjaman_bank_detail_id,delete i.updated_at,delete i.updated_by,delete i.created_at,delete i.created_by;var n=e.filter(function(t){return t.comp_pinjaman_bank_id===i.comp_pinjaman_bank_id});n.length&&(i.id=n[0].id)},l=0;l<a.length;l++)i(l);var s=a.filter(function(t){return e.map(function(t){return t.id}).includes(t.id)});this.$set(this.modalData.thisMonth,t,s)},submitData:function(t){var a=this;this.$_api.post("custom/pinjaman-bank-details/calculate",this.modalData.thisMonth).then(function(t){a.$set(a.modalData,"thisMonth",t.data),a.mainKey++,a.$_alert.success(null,"Detail Rincian berhasil diperbarui")}).catch(function(t){a.$_alert.error(t)})},getSummaryCard:function(){var t=this;return c()(s.a.mark(function a(){var e,i;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e=t.$route.params.id,i="custom/pinjaman-bank/card-summary-pinjaman",t.$_api.get(i,{id:e}).then(function(a){t.summaryCard=a.data}).catch(function(a){t.$_alert.error(a)});case 3:case"end":return a.stop()}},a,t)}))()}}},p={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("tas-base-crud",{ref:"sub-module",attrs:{config:t.config,"hide-update":"","hide-detail":""},scopedSlots:t._u([{key:"list-table-action",fn:function(a){return[e("a",{staticClass:"btn btn-info btn-sm",on:{click:function(e){return t.openModal("modal-rincian-pinjaman",a)}}},[t._v("Detail Rincian ")])]}},{key:"list-header",fn:function(){return[t.summaryCard.length?e("div",{staticClass:"row mb-5 px-4"},t._l(t.summaryCard,function(a,i){return e("div",{key:i+"-card-summary-pinjaman",staticClass:"col-auto px-8 py-6 mr-5 bg-light-primary",staticStyle:{"border-radius":"8px"}},[e("div",{staticClass:"font-size-sm font-weight-bold"},[t._v(t._s(a.name))]),t._v(" "),e("div",{staticClass:"font-size-h3 font-weight-bolder"},[t._v(t._s(t._f("parse")(a.value,"money")))])])}),0):t._e(),t._v(" "),t.modalData?e("b-modal",{attrs:{"header-class":"pb-1",id:"modal-rincian-pinjaman","hide-footer":"",size:"xl"},scopedSlots:t._u([{key:"modal-header",fn:function(){return[e("div",{staticClass:"d-flex justify-content-between flex-fill"},[e("div",{staticClass:"d-flex flex-column flex-fill"},[e("h5",{staticClass:"mb-3"},[t._v("Detail Rincian Iuran Simpan Pinjam - Bulan "+t._s(t._f("parse")(t.modalData.thisMonth.periode_month,"period")))]),t._v(" "),e("table",{staticClass:"table no-border mb-0"},[e("tr",[e("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("Tenaga Kerja â€ƒ")]),t._v(" "),e("td",{staticClass:"pt-0 pr-0 nowrap-table"},[t._v(t._s(t.modalData.rel_employee_id))]),t._v(" "),e("td",{staticClass:"pr-10 pl-0",attrs:{rowspan:"4"}}),t._v(" "),e("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("Total Pinjaman")]),t._v(" "),e("th",{staticClass:"pt-0 pr-0 nowrap-table"},[e("div",{staticClass:"d-flex justify-content-between"},[e("span",{staticClass:"mr-4"},[t._v("Rp. ")]),t._v(" "),e("span",{staticClass:"text-right font-weight-bold"},[t._v(t._s(t._f("parse")(t.modalData.thisMonth.pinjaman_value||0,"number")))])])])])])])])]},proxy:!0}],null,!1,2636866531)},[t._v(" "),e("div",{staticClass:"row"},[t.modalData.beforeMonth?e("div",{staticClass:"col-5 order-2"},[e("h5",{staticClass:"mb-4"},[t._v("Detail Rincian bulan sebelumnya ("+t._s(t._f("parse")(t.modalData.beforeMonth.periode_month,"period"))+")")]),t._v(" "),e("div",{staticClass:"in-card-border border-primary"},[e("h5",{staticClass:"font-weight-bolder text-center mb-3"},[t._v("Pinjaman Bank")]),t._v(" "),t.modalData.beforeMonth.child_pinjaman_bank_detail_components.length?[e("table",{staticClass:"table no-border font-size-sm mb-0"},[t._l(t.modalData.beforeMonth.child_pinjaman_bank_detail_components,function(a,i){return e("tr",{key:i+"-tr-simpanan-before"},[e("td",{staticClass:"pt-0 pl-0 font-size-sm"},[t._v(t._s(a.rel_comp_pinjaman_bank_id))]),t._v(" "),e("th",{staticClass:"pt-0 pr-0 font-size-sm"},[e("div",{staticClass:"d-flex justify-content-between"},[e("span",{},[t._v("Rp.")]),t._v(" "),e("span",{staticClass:"text-right font-weight-bold"},[t._v(t._s(t._f("parse")(a.comp_value||0,"number")))])])])])}),t._v(" "),e("tr",[e("td",{staticClass:"pl-0 font-size-sm font-weight-bolder text-primary border-primary",staticStyle:{"border-top":"2px solid"}},[t._v("Total Pinjaman")]),t._v(" "),e("th",{staticClass:"pr-0 font-size-sm border-primary",staticStyle:{"border-top":"2px solid"}},[e("div",{staticClass:"d-flex justify-content-between"},[e("span",{},[t._v("Rp.")]),t._v(" "),e("span",{staticClass:"text-right font-weight-bold"},[t._v(t._s(t._f("parse")(t.modalData.beforeMonth.pinjaman_value||0,"number")))])])])])],2),t._v(" "),e("a",{staticClass:"btn btn-block btn-light-primary mt-3",on:{click:function(a){return t.copyValue("child_pinjaman_bank_detail_components")}}},[e("i",{staticClass:"ri-file-copy-line"}),t._v(" Salin nilai pinjaman ")])]:e("div",{staticClass:"alert alert-custom alert-light-danger mt-5",attrs:{role:"alert"}},[e("div",{staticClass:"alert-icon"},[e("span",{staticClass:"svg-icon svg-icon-danger svg-icon-xl"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[e("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[e("rect",{attrs:{x:"0",y:"0",width:"24",height:"24"}}),t._v(" "),e("path",{attrs:{d:"M11.1669899,4.49941818 L2.82535718,19.5143571 C2.557144,19.9971408 2.7310878,20.6059441 3.21387153,20.8741573 C3.36242953,20.9566895 3.52957021,21 3.69951446,21 L21.2169432,21 C21.7692279,21 22.2169432,20.5522847 22.2169432,20 C22.2169432,19.8159952 22.1661743,19.6355579 22.070225,19.47855 L12.894429,4.4636111 C12.6064401,3.99235656 11.9909517,3.84379039 11.5196972,4.13177928 C11.3723594,4.22181902 11.2508468,4.34847583 11.1669899,4.49941818 Z",fill:"#000000",opacity:"0.3"}}),t._v(" "),e("rect",{attrs:{fill:"#000000",x:"11",y:"9",width:"2",height:"7",rx:"1"}}),t._v(" "),e("rect",{attrs:{fill:"#000000",x:"11",y:"17",width:"2",height:"2",rx:"1"}})])])])]),t._v(" "),e("div",{staticClass:"alert-text"},[t._v("Data Pinjaman pada bulan lalu belum dibuat atau tidak ditemukan!")])])],2)]):t._e(),t._v(" "),t.modalData.thisMonth?e("div",{class:t.modalData.beforeMonth?"col-7 border-right":"col-12"},[e("h5",{staticClass:"font-weight-bolder mb-3"},[t._v("Rincian Pinjaman")]),t._v(" "),t._l(t.modalData.thisMonth.child_pinjaman_bank_detail_components,function(a,i){return[e("s-input",{key:i+"-form-simpanan",attrs:{item:{type:"number",validation:[],label:a.rel_comp_pinjaman_bank_id,prefix:"Rp.",groupClass:"mb-3",ic:"mr-4",api:"",attr:{precision:2}}},model:{value:a.comp_value,callback:function(e){t.$set(a,"comp_value",e)},expression:"s.comp_value"}})]}),t._v(" "),e("hr"),t._v(" "),e("h5",{staticClass:"font-weight-bolder mb-3"},[t._v("Deskripsi Rincian Iuran Simpan Pinjam")]),t._v(" "),e("div",{staticClass:"form-group mb-3 mt-0"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.modalData.thisMonth.description,expression:"modalData.thisMonth.description"}],staticClass:"form-control",attrs:{rows:"4",placeholder:"Deskripsi / note Rincian iuran simpan pinjam"},domProps:{value:t.modalData.thisMonth.description},on:{input:function(a){a.target.composing||t.$set(t.modalData.thisMonth,"description",a.target.value)}}})])],2):t._e()]),t._v(" "),e("div",{staticClass:"mt-5"},[e("button",{staticClass:"btn btn-primary btn-lg btn-block font-size-md",on:{click:function(a){return t.submitData("modal-rincian-pinjaman")}}},[t._v("Perbarui & Simpan")])])]):t._e()]},proxy:!0}])})},staticRenderFns:[]};var u=e("VU/8")(m,p,!1,function(t){e("Pgyw")},"data-v-b458de4a",null);a.default=u.exports},Pgyw:function(t,a){}});
//# sourceMappingURL=54.9236d9415ae50202bcf1.js.map