webpackJsonp([69],{TPoc:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=t("Dd8w"),i=t.n(l),s=t("Xxa5"),d=t.n(s),n=t("woOf"),o=t.n(n),r=t("exGp"),p=t.n(r),c={name:"crud-tunjangan-makan-details",data:function(){return{modalData:{},mainKey:0,config:{title:"Data Tunjangan Makan",model_api:null,getter:"custom/tunjangan-makan-details",setter:"tunjangan-makan-details",pk_field:"name",filter_api:{},custom_api:{create:"custom/tunjangan-makan-details"},permission:{create:"create-tunjangan-makan-details",read:"view-tunjangan-makan-details",update:"update-tunjangan-makan-details",delete:"delete-tunjangan-makan-details"},slave:[],fields:[{id:"id",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"updated_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_at",label:"Dibuat",methods:{create:!1,update:!1,filter:!1}},{id:"updated_at",label:"Diperbarui",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"status_code",data:"status_code",label:"Status",placeholder:null,methods:{list:{order:!0,class:{not_calculated_yet:"badge badge-danger",calculated:"badge badge-primary"},transform:"calculated"},detail:{order:!0,class:{not_calculated_yet:"badge badge-danger",calculated:"badge badge-primary"},transform:"calculated"},create:!1,update:{view_data:"status_code",type:"radio",value:"calculated",option:{list_pointer:{label:"label",code:"code",list:[{label:"Sudah dihitung",code:"calculated"},{label:"Belum dihitung",code:"not_calculated_yet"}]}}},filter:{view_data:"status_code",type:"radio",option:{list_pointer:{label:"label",code:"code",list:[{label:"Sudah dihitung",code:"calculated"},{label:"Belum dihitung",code:"not_calculated_yet"}]}}}}},{id:"employee_id",label:"Nama Tenaga Kerja",methods:{list:{view_data:"rel_employee_id"},create:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}},update:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}},filter:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}}}},{id:"job_position_id",label:"Jabatan",methods:{list:{view_data:"rel_job_position_id"},create:!1,update:{setter:"job-positions",getter:"job-positions",type:"lookup-radio",option:{list_pointer:{label:"job_position_name",code:"id",display:["job_position_name"]}}},filter:{setter:"job-positions",getter:"job-positions",type:"lookup-radio",option:{list_pointer:{label:"job_position_name",code:"id",display:["job_position_name"]}}}}},{id:"status_employment_id",label:"Status Ketenagakerjaan",methods:{list:{view_data:"rel_status_employment_id",show:!1},create:!1,update:{setter:"custom/master-status-employments",getter:"custom/master-status-employments",type:"lookup-radio",option:{list_pointer:{label:"name",code:"id",display:["name"]},get_param:[{id:"job_position_id"}]}},filter:{setter:"custom/master-status-employments",getter:"custom/master-status-employments",type:"lookup-radio",option:{list_pointer:{label:"name",code:"id",display:["name"]},get_param:[{id:"job_position_id"}]}}}},{id:"is_use_presence_data",label:"Presensi",methods:{list:{order:!0,class:{false:"badge badge-danger",true:"badge badge-primary"},transform:"ynBool"},detail:!1,create:!1,update:{type:"radio",option:{list_pointer:{label:"label",code:"code",list:[{label:"Ya",code:!0},{label:"Tidak",code:!1}]}}},filter:{type:"radio",option:{list_pointer:{label:"label",code:"code",list:[{label:"Ya",code:!0},{label:"Tidak",code:!1}]}}}}},{id:"penerimaan_value",label:"Penerimaan",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"base_value",label:"Nilai Dasar",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"description",label:"Deskripsi",methods:{create:{type:"textarea"},update:{type:"textarea"}}}]}}},watch:{mainKey:{immediate:!1,deep:!1,handler:function(a){this.$refs["sub-module"].$children[1].getData()}}},methods:{openModal:function(a,e){var t=this;return p()(d.a.mark(function l(){var i;return d.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,t.getDetail("get","custom/tunjangan-makan-details/show",{id:e.rowData.id});case 2:l.t0=l.sent,i={detail:l.t0},t.modalData=o()({},i,e.rowData),t.$nextTick().then(function(e){t.$bvModal.show(a)});case 6:case"end":return l.stop()}},l,t)}))()},getDetail:function(a,e,t){var l=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.$_api[a](e,t).then(function(a){return i&&a.data[i]||a.data}).catch(function(a){l.$_alert.error(a)})},copyValue:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.$set(this.modalData,"detail",i()({},this.modalData.detail,this.modalData.sync.data_recaps))},submitData:function(){var a=this,e=this.config.getter+"/calculate";this.$_api.post(e,this.modalData.detail).then(function(e){a.$_alert.success(null,"Detail Rincian berhasil diperbarui"),a.$set(a.modalData,"detail",e.data),a.mainKey++}).catch(function(e){a.$_alert.error(e)})}}},_={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("tas-base-crud",{ref:"sub-module",attrs:{config:a.config,"hide-update":"","hide-filter":"","hide-detail":""},scopedSlots:a._u([{key:"list-table-action",fn:function(e){return[t("a",{staticClass:"btn btn-info btn-sm",on:{click:function(t){return a.openModal("modal-rincian-makan",e)}}},[a._v("Lihat Detail")])]}},{key:"list-header",fn:function(){return[a.modalData.detail?t("b-modal",{attrs:{"header-class":"pb-1",id:"modal-rincian-makan","hide-footer":"",size:"xl"},scopedSlots:a._u([{key:"modal-header",fn:function(){return[t("div",{staticClass:"d-flex justify-content-between flex-fill"},[t("div",{staticClass:"d-flex flex-column flex-fill"},[t("div",{staticClass:"text-center mb-5"},[t("h5",{staticClass:"mb-1 font-weight-bold"},[a._v("Detail "+a._s(a.config.title))]),a._v(" "),t("span",{staticClass:"font-weight-bolder"},[a._v("Periode "+a._s(a._f("parse")(a.modalData.detail.periode_month,"period")))])]),a._v(" "),t("table",{staticClass:"table no-border mb-0"},[t("tr",[t("td",{staticClass:"pt-0 pl-0 nowrap-table"},[a._v("Tenaga Kerja")]),a._v(" "),t("td",{staticClass:"pt-0 pr-0 nowrap-table"},[a._v(": "+a._s(a.modalData.rel_employee_id))]),a._v(" "),t("td",{}),a._v(" "),t("td",{staticClass:"pt-0 pl-0 nowrap-table"},[a._v("Jabatan")]),a._v(" "),t("td",{staticClass:"pt-0 pr-0 nowrap-table"},[a._v(": "+a._s(a.modalData.detail.rel_job_position_id))])]),a._v(" "),t("tr",[t("td",{staticClass:"pt-0 pl-0 nowrap-table"},[a._v("MPP")]),a._v(" "),t("td",{staticClass:"pt-0 pr-0 nowrap-table"},[a._v(": "+a._s(a._f("parse")(a.modalData.detail.is_mpp,"ynBool")))]),a._v(" "),t("td",{}),a._v(" "),t("td",{staticClass:"pt-0 pl-0 nowrap-table"},[a._v("Status Ketenagakerjaan")]),a._v(" "),t("td",{staticClass:"pt-0 pr-0 nowrap-table"},[a._v(": "+a._s(a.modalData.detail.rel_status_employment_id))])])])])])]},proxy:!0}],null,!1,3986434827)},[a._v(" "),a.modalData.detail?t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-5"},[t("ul",{staticClass:"list-unstyled mb-0"},[t("li",{staticClass:"mb-5"},[t("s-input",{attrs:{item:{type:"number",validation:[],label:"Nilai Dasar",prefix:"Rp. ",groupClass:"mb-0",ic:"mr-4",api:"",attr:{precision:2}}},model:{value:a.modalData.detail.base_value,callback:function(e){a.$set(a.modalData.detail,"base_value",e)},expression:"modalData.detail.base_value"}})],1),a._v(" "),t("li",{staticClass:"mb-3"},[t("label",{staticClass:"checkbox checkbox-md"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.modalData.detail.is_use_presence_data,expression:"modalData.detail.is_use_presence_data"}],attrs:{type:"checkbox",name:"bpjs_perusahaan"},domProps:{checked:Array.isArray(a.modalData.detail.is_use_presence_data)?a._i(a.modalData.detail.is_use_presence_data,null)>-1:a.modalData.detail.is_use_presence_data},on:{change:function(e){var t=a.modalData.detail.is_use_presence_data,l=e.target,i=!!l.checked;if(Array.isArray(t)){var s=a._i(t,null);l.checked?s<0&&a.$set(a.modalData.detail,"is_use_presence_data",t.concat([null])):s>-1&&a.$set(a.modalData.detail,"is_use_presence_data",t.slice(0,s).concat(t.slice(s+1)))}else a.$set(a.modalData.detail,"is_use_presence_data",i)}}}),a._v(" "),t("span",{staticClass:"mr-3"}),a._v("Perhitungan Tunjangan menggunakan data Rekap Presensi")])])]),a._v(" "),t("hr"),a._v(" "),t("table",{staticClass:"table no-border mt-5"},[t("tr",[t("td",{staticClass:"pt-0 pl-0 nowrap-table"},[a._v("Penerimaan")]),a._v(" "),t("td",{staticClass:"pt-0 pl-0 nowrap-table"},[a._v(":")]),a._v(" "),t("th",{staticClass:"pt-0 pr-5"},[t("div",{staticClass:"d-flex justify-content-between"},[t("span",{},[a._v("Rp.â€ƒ")]),a._v(" "),t("span",{staticClass:"text-right font-weight-bold"},[a._v(a._s(a._f("parse")(a.modalData.detail.penerimaan_value||0,"number")))])])])])]),a._v(" "),t("div",{staticClass:"mt-5"},[t("button",{staticClass:"btn btn-primary btn-lg btn-block font-size-md",on:{click:function(e){return a.submitData("modal-rincian-makan")}}},[a._v("Perbarui & Simpan")])])]),a._v(" "),t("div",{staticClass:"col-md-7"},[t("div",{staticClass:"py-3 px-5 border-primary mt-2 bg-light-primary",staticStyle:{border:"2px solid","border-radius":"8px"}},[t("h5",[a._v("Data Rekap Presensi")]),a._v(" "),a.modalData.detail.data_employee_presence_recaps?t("table",{staticClass:"table no-border"},[t("tr",[t("td",{staticClass:"py-0 nowrap-table pl-0"},[a._v("Jumlah Hari Kerja")]),a._v(" "),t("td",{staticClass:"py-0 nowrap-table pl-0"},[a._v(":")]),a._v(" "),t("td",{staticClass:"py-0 "},[a._v(" "+a._s(a._f("parse")(a.modalData.detail.data_employee_presence_recaps.work_day_count||0,"number"))+" Hari")])]),a._v(" "),t("tr",[t("td",{staticClass:"py-0 nowrap-table pl-0"},[a._v("Tidak Masuk")]),a._v(" "),t("td",{staticClass:"py-0 nowrap-table pl-0"},[a._v(":")]),a._v(" "),t("td",{staticClass:"py-0 "},[a._v(a._s(a._f("parse")(a.modalData.detail.data_employee_presence_recaps.work_day_lost_count||0,"number"))+" Hari")])]),a._v(" "),t("tr",[t("td",{staticClass:"py-0 nowrap-table pl-0"},[a._v("Terlambat")]),a._v(" "),t("td",{staticClass:"py-0 nowrap-table pl-0"},[a._v(":")]),a._v(" "),t("td",{staticClass:"py-0 "},[a._v(a._s(a._f("parse")(a.modalData.detail.data_employee_presence_recaps.work_day_late_count||0,"number"))+" Hari, "+a._s(a._f("parse")(a.modalData.detail.data_employee_presence_recaps.work_day_minute_late_count||0,"number"))+" Menit")])])]):a._e(),a._v(" "),t("h5",[a._v("Apabila menggunakan Rekap Presensi :")]),a._v(" "),t("ul",{staticClass:"pl-5 font-size-sm"},[t("li",[a._v("Nilai Penerimaan didapat dari : "),t("code",[a._v("Nilai Dasar x (Jumlah Hari Kerja - Tidak Masuk)")])])])])])]):a._e()]):a._e()]},proxy:!0}])})},staticRenderFns:[]},m=t("VU/8")(c,_,!1,null,null,null);e.default=m.exports}});
//# sourceMappingURL=69.89f18256bf20de04d9cc.js.map