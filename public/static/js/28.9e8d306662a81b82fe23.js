webpackJsonp([28],{NGQN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("woOf"),s=a.n(i),l=a("PJh5"),n=a.n(l);n.a.locale("id");var r={name:"crud-cut-off-qualitatif-schedules",data:function(){return{config:{title:"Pengaturan Cut Off",model_api:"",getter:"cut-off-qualitatif-schedules",setter:"cut-off-qualitatif-schedules",pk_field:"name",custom_api:{list:"custom/cut-off-qualitatif-schedules/list"},filter_api:{periode_year:n()().set("date",1).set("month",0).format("YYYY-MM-DD"),sort_by:"id"},permission:{create:"create-cut-off-qualitatif-schedules",read:"view-cut-off-qualitatif-schedules",update:"update-cut-off-qualitatif-schedules",delete:"delete-cut-off-qualitatif-schedules"},fields:[{id:"division_name",label:"Nama Divisi",methods:{list:{type:"text"}}},{id:"bu_type",label:"Tipe",methods:{list:{type:"text",class:"text-uppercase",transform:"capitalize"}}},{id:"closing_date",label:"Waktu Closing",methods:{list:{type:"row-slot"}}}]},tempDate:{type:null,date:n()().format("YYYY-MM-DD"),name:"",id:0},tempYear:n()().set("date",1).set("month",0).format("YYYY-MM-DD")}},watch:{tempYear:{deep:!1,immediate:!1,handler:function(t){this.reloadList({periode_year:n()(t).set("date",1).set("month",0).format("YYYY-MM-DD"),sort_by:"id"})}}},methods:{openModalDate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];this.tempDate=s()({},{date:t.closing_date||n()().format("YYYY-MM-DD"),type:e,name:t.division_name||"Global",id:t.id||0}),this.$bvModal.show("dateModals")},resetDate:function(){this.tempDate=s()({},{date:n()().format("YYYY-MM-DD"),type:null})},saveModals:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e)e.periode_year=this.tempYear,e.closing_date=e.closing_date||n()().format("YYYY-MM-DD"),e.division_id=e.id,this.$_api.put("custom/cut-off-qualitatif-schedules/update",e).then(function(e){t.$_alert.success("Cut Off berhasil diperbarui"),t.reloadList()},function(e){t.$_alert.error(e)});else{var a="global"===this.tempDate.type?"custom/cut-off-qualitatif-schedules/update-all":"custom/cut-off-qualitatif-schedules/update",i={periode_year:this.tempYear,closing_date:this.tempDate.date};"single"===this.tempDate.type&&(i.division_id=this.tempDate.id),this.$_api.put(a,i).then(function(e){t.$_alert.success("Cut Off berhasil diperbarui"),t.$bvModal.hide("dateModals"),t.reloadList()},function(e){t.$_alert.error(e)})}},reloadList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?this.$set(this.$refs["crud-cutoff"].$children[1].paramAPI,"filters",t):this.$refs["crud-cutoff"].$children[1].getData()}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tas-base-crud",{ref:"crud-cutoff",attrs:{config:t.config,"hide-detail":"","hide-create":"","hide-update":"","hide-delete":"","hide-filter":""},scopedSlots:t._u([{key:"header-table",fn:function(){return[a("div",{staticClass:"card card-custom mb-2"},[a("div",{staticClass:"card-body py-2 px-4"},[a("div",{staticClass:"d-flex justify-content-between"},[a("s-input",{attrs:{item:{label:"",nm:!1,inline:!1,type:"year",prefix:"Tahun Pengaturan Cut Off",validation:["required"]}},model:{value:t.tempYear,callback:function(e){t.tempYear=e},expression:"tempYear"}}),t._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openModalDate({},"global")}}},[a("i",{staticClass:"ri-timer-line"}),t._v(" Atur Cut Off Global ")])],1)])]),t._v(" "),a("b-modal",{attrs:{id:"dateModals",centered:"","hide-footer":"","hide-header":"",size:"sm"},on:{hide:function(e){return t.resetDate()}}},[a("div",{staticClass:"text-center"},[a("span",{staticClass:"font-size- font-weight-bold"},[t._v("Cut Off Tahun "+t._s(t._f("parse")(t.tempYear,"year"))),a("br"),t._v(t._s(t.tempDate.name)+" ")]),t._v(" "),a("hr",{staticClass:"mt-1"}),t._v(" "),a("s-input",{attrs:{item:{label:"",nm:!0,inline:!0,type:"datetime",validation:["required"]}},model:{value:t.tempDate.date,callback:function(e){t.$set(t.tempDate,"date",e)},expression:"tempDate.date"}}),t._v(" "),a("div",{staticClass:"d-flex"},[a("button",{staticClass:"btn btn-block btn-sm btn-primary mt-3",on:{click:function(e){return t.saveModals()}}},[t._v("Simpan")])])],1)])]},proxy:!0},{key:"list-division_name",fn:function(e){return[e?a("span",{staticClass:"switch switch-outline switch-icon switch-primary"},[a("label",{staticClass:"d-flex align-items-center"},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.rowData.active,expression:"rowData.rowData.active"}],attrs:{type:"checkbox","true-value":1,"false-value":0},domProps:{checked:Array.isArray(e.rowData.active)?t._i(e.rowData.active,null)>-1:t._q(e.rowData.active,1)},on:{change:[function(a){var i=e.rowData.active,s=a.target,l=s.checked?1:0;if(Array.isArray(i)){var n=t._i(i,null);s.checked?n<0&&t.$set(e.rowData,"active",i.concat([null])):n>-1&&t.$set(e.rowData,"active",i.slice(0,n).concat(i.slice(n+1)))}else t.$set(e.rowData,"active",l)},function(a){return t.saveModals(e.rowData)}]}}),t._v(" "),a("span")]),t._v(" "),a("div",{staticClass:"ml-3"},[t._v(t._s(e.rowData.division_name)+" ("+t._s(e.rowData.division_code)+")")])])]):t._e()]}},{key:"list-closing_date",fn:function(e){return[e?a("div",{staticClass:"d-flex align-items-center"},[a("span",{staticClass:"font-weight-bold"},[t._v(t._s(t._f("parse")(e.rowData.closing_date||"Belum ditentukan","longDateTimeUTC")))]),t._v(" "),a("button",{staticClass:"btn btn-icon btn-sm btn-light-primary ml-3",on:{click:function(a){return t.openModalDate(e.rowData,"single")}}},[a("i",{staticClass:"ri-edit-2-line"})])]):t._e()]}}])})},staticRenderFns:[]},d=a("VU/8")(r,o,!1,null,null,null);e.default=d.exports}});
//# sourceMappingURL=28.9e8d306662a81b82fe23.js.map