webpackJsonp([59],{WiBx:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("Dd8w"),i=e.n(s),l=e("Xxa5"),r=e.n(l),o=e("woOf"),n=e.n(o),d=e("exGp"),p=e.n(d),_={name:"crud-presence-on-periode-recaps",data:function(){return{modalData:{},mainKey:0,config:{title:"Presensi Tenaga Kerja",model_api:null,getter:"custom/presence-on-periode-recaps",setter:"custom/presence-on-periode-recaps",pk_field:"name",filter_api:{},custom_api:{},permission:{create:"create-presence-on-periode-recaps",read:"view-presence-on-periode-recaps",update:"update-presence-on-periode-recaps",delete:"delete-presence-on-periode-recaps"},slave:[],fields:[{id:"id",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"updated_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_at",label:"Dibuat",methods:{create:!1,update:!1,filter:!1}},{id:"updated_at",label:"Diperbarui",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"status_code",label:"Sinkronisasi",methods:{list:{order:!0,class:{not_synchronized_yet:"badge badge-danger",synchronized:"badge badge-primary"},transform:"sync"}}},{id:"employee_id",label:"Nama Tenaga Kerja",methods:{list:{view_data:"rel_employee_id"},create:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}},update:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}},filter:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}}}},{id:"job_position_id",label:"Jabatan",methods:{list:{view_data:"rel_job_position_id"},create:{setter:"job-positions",getter:"job-positions",type:"lookup-radio",option:{list_pointer:{label:"job_position_name",code:"id",display:["job_position_name"]}}},update:{setter:"job-positions",getter:"job-positions",type:"lookup-radio",option:{list_pointer:{label:"job_position_name",code:"id",display:["job_position_name"]}}},filter:{setter:"job-positions",getter:"job-positions",type:"lookup-radio",option:{list_pointer:{label:"job_position_name",code:"id",display:["job_position_name"]}}}}},{id:"status_employment_id",label:"Status Ketenagakerjaan",methods:{list:{view_data:"rel_status_employment_id"},create:{setter:"custom/master-status-employments",getter:"custom/master-status-employments",type:"lookup-radio",option:{list_pointer:{label:"name",code:"id",display:["name"]},get_param:[{id:"job_position_id"}]}},update:{setter:"custom/master-status-employments",getter:"custom/master-status-employments",type:"lookup-radio",option:{list_pointer:{label:"name",code:"id",display:["name"]},get_param:[{id:"job_position_id"}]}},filter:{setter:"custom/master-status-employments",getter:"custom/master-status-employments",type:"lookup-radio",option:{list_pointer:{label:"name",code:"id",display:["name"]},get_param:[{id:"job_position_id"}]}}}},{id:"work_day_count",label:"Jumlah Hari Kerja",methods:{create:!1,update:!1,list:{transform:"number"},detail:{transform:"number"}}},{id:"work_day_lost_count",label:"Tidak Masuk (Hari)",methods:{create:!1,update:!1,list:{transform:"number"},detail:{transform:"number"}}},{id:"work_day_late_count",label:"Terlambat (Hari)",methods:{create:!1,update:!1,list:{transform:"number"},detail:{transform:"number"}}},{id:"work_day_minute_late_count",label:"Terlambat (Menit)",methods:{create:!1,update:!1,list:{transform:"number"},detail:{transform:"number"}}}]}}},watch:{mainKey:{immediate:!1,deep:!1,handler:function(t){this.$refs["sub-module"].$children[1].getData()}}},methods:{openModal:function(t,a){var e=this;return p()(r.a.mark(function s(){var i,l;return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.getDetail("get","custom/presence-on-periode-recaps/show",{id:a.rowData.id});case 2:return s.t0=s.sent,i={detail:s.t0},l={id:a.rowData.id,periode_month:i.detail.periode_month,taptap_user_id:i.detail.taptap_user_id,start_date:i.detail.start_date,end_date:i.detail.end_date},s.next=7,e.getDetail("post","custom/presence-on-periode-recaps/sync",l);case 7:i.sync=s.sent,e.modalData=n()({},i,a.rowData),e.$nextTick().then(function(a){e.$bvModal.show(t)});case 10:case"end":return s.stop()}},s,e)}))()},getDetail:function(t,a,e){var s=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.$_api[t](a,e).then(function(t){return i&&t.data[i]||t.data}).catch(function(t){s.$_alert.error(t)})},copyValue:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.$set(this.modalData,"detail",i()({},this.modalData.detail,this.modalData.sync.data_recaps))},submitData:function(t){var a=this;this.$_api.update("custom/presence-on-periode-recaps",this.modalData.detail).then(function(t){a.mainKey++,a.$_alert.success(null,"Detail Rincian berhasil diperbarui")}).catch(function(t){a.$_alert.error(t)})}}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("tas-base-crud",{ref:"sub-module",attrs:{config:t.config,"hide-create":"","hide-delete":"","hide-update":"","hide-filter":"","hide-detail":""},scopedSlots:t._u([{key:"list-table-action",fn:function(a){return[e("a",{staticClass:"btn btn-info btn-sm",on:{click:function(e){return t.openModal("modal-rincian-presence",a)}}},[t._v("Detail Presensi")])]}},{key:"list-header",fn:function(){return[t.modalData.detail?e("b-modal",{attrs:{"header-class":"pb-1",id:"modal-rincian-presence","hide-footer":"",size:"xl"},scopedSlots:t._u([{key:"modal-header",fn:function(){return[e("div",{staticClass:"d-flex justify-content-between flex-fill"},[e("div",{staticClass:"d-flex flex-column flex-fill"},[e("div",{staticClass:"text-center mb-5"},[e("h5",{staticClass:"mb-1 font-weight-bold"},[t._v("Detail Presensi Tenaga Kerja")]),t._v(" "),e("span",{staticClass:"font-weight-bolder"},[t._v("Periode "+t._s(t._f("parse")(t.modalData.detail.periode_month,"period")))])]),t._v(" "),e("table",{staticClass:"table no-border mb-0"},[e("tr",[e("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("Tenaga Kerja")]),t._v(" "),e("td",{staticClass:"pt-0 pr-0 nowrap-table"},[t._v(": "+t._s(t.modalData.rel_employee_id))]),t._v(" "),e("td",{}),t._v(" "),e("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("Hari Kerja")]),t._v(" "),e("th",{staticClass:"pt-0 pr-0 nowrap-table"},[e("span",{staticClass:"text-right font-weight-bolder"},[t._v(": "+t._s(t._f("parse")(t.modalData.detail.work_day_count||0,"number"))+" hari")])])]),t._v(" "),e("tr",[e("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("Jabatan")]),t._v(" "),e("td",{staticClass:"pt-0 pr-0 nowrap-table"},[t._v(": "+t._s(t.modalData.detail.rel_job_position_id))]),t._v(" "),e("td",{}),t._v(" "),e("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("Tidak Masuk")]),t._v(" "),e("th",{staticClass:"pt-0 pr-0 nowrap-table"},[e("span",{staticClass:"text-right font-weight-bolder"},[t._v(": "+t._s(t._f("parse")(t.modalData.detail.work_day_lost_count||0,"number"))+" hari")])])]),t._v(" "),e("tr",[e("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("Status Ketenagakerjaan")]),t._v(" "),e("td",{staticClass:"pt-0 pr-0 nowrap-table"},[t._v(": "+t._s(t.modalData.detail.rel_status_employment_id))]),t._v(" "),e("td",{}),t._v(" "),e("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("Terlambat")]),t._v(" "),e("th",{staticClass:"pt-0 pr-0 nowrap-table"},[e("span",{staticClass:"text-right font-weight-bolder"},[t._v(": "+t._s(t._f("parse")(t.modalData.detail.work_day_late_count||0,"number"))+" hari")])])]),t._v(" "),e("tr",[e("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("TapTap User ID")]),t._v(" "),e("td",{staticClass:"pt-0 pr-0 nowrap-table"},[t._v(": "+t._s(t.modalData.detail.taptap_user_id))]),t._v(" "),e("td",{}),t._v(" "),e("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("Menit Terlambat")]),t._v(" "),e("th",{staticClass:"pt-0 pr-0 nowrap-table"},[e("span",{staticClass:"text-right font-weight-bolder"},[t._v(": "+t._s(t._f("parse")(t.modalData.detail.work_day_minute_late_count||0,"number"))+" menit")])])])])])])]},proxy:!0}],null,!1,3023886288)},[t._v(" "),t.modalData.detail?e("div",{staticClass:"row"},[e("div",{staticClass:"col-7"},[e("b-tabs",{attrs:{"content-class":"mt-3"}},[e("b-tab",{attrs:{title:"Data Presensi TapTap Bulan ini",active:""}},[e("div",{staticClass:"scrolling-wrapper"},[e("table",{staticClass:"table table-custom-header v-center table-bordered scrolling-tbody"},[e("thead",{staticClass:"bg-light-primary"},[e("tr",[e("th",{staticClass:"text-center"},[t._v("Tanggal")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("Shift")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("Masuk")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("Keluar")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("Terlambat")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("Status")])])]),t._v(" "),e("tbody",t._l(t.modalData.sync.data_taptap,function(a,s){return e("tr",{key:s+"-taptap-recaps"},[e("td",{staticClass:"nowrap-table"},[t._v(t._s(t._f("parse")(a.series_periode,"longDate")))]),t._v(" "),e("td",{staticClass:"nowrap-table text-capitalize"},[t._v(t._s(a.rel_working_category_id))]),t._v(" "),e("td",{staticClass:"nowrap-table"},[t._v(t._s(a.checkin))]),t._v(" "),e("td",{staticClass:"nowrap-table"},[t._v(t._s(a.checkout))]),t._v(" "),e("td",{staticClass:"nowrap-table"},[t._v(t._s(t._f("parse")(a.late,"hours")))]),t._v(" "),e("td",{staticClass:"nowrap-table text-capitalize"},[t._v(t._s(a.status_presence))])])}),0)])])]),t._v(" "),e("b-tab",{attrs:{title:"Presensi Bulan lalu"}},[e("div",{staticClass:"scrolling-wrapper"},[e("table",{staticClass:"table table-custom-header v-center table-bordered scrolling-tbody"},[e("thead",{staticClass:"bg-light-primary"},[e("tr",[e("th",{staticClass:"text-center"},[t._v("Tanggal")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("Shift")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("Masuk")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("Keluar")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("Terlambat")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("Status")])])]),t._v(" "),e("tbody",t._l(t.modalData.sync.data_taptap_month_before,function(a,s){return e("tr",{key:s+"-taptap-recaps"},[e("td",{staticClass:"nowrap-table"},[t._v(t._s(t._f("parse")(a.series_periode,"longDate")))]),t._v(" "),e("td",{staticClass:"nowrap-table text-capitalize"},[t._v(t._s(a.rel_working_category_id))]),t._v(" "),e("td",{staticClass:"nowrap-table"},[t._v(t._s(a.checkin))]),t._v(" "),e("td",{staticClass:"nowrap-table"},[t._v(t._s(a.checkout))]),t._v(" "),e("td",{staticClass:"nowrap-table"},[t._v(t._s(t._f("parse")(a.late,"hours")))]),t._v(" "),e("td",{staticClass:"nowrap-table text-capitalize"},[t._v(t._s(a.status_presence))])])}),0)])])])],1)],1),t._v(" "),e("div",{staticClass:"col-5"},[e("table",{staticClass:"table table-custom-header v-center table-bordered"},[e("tbody",[e("tr",[e("td",{staticClass:"font-weight-bolder bg-light-primary text-uppercase",attrs:{colspan:"4"}},[t._v("Rekap Presensi Tenaga Kerja")])]),t._v(" "),e("tr",[e("th",[t._v("Komponen")]),t._v(" "),e("th",[t._v("Nilai")]),t._v(" "),e("th",{staticClass:"text-center nowrap-table"},[t._v("Presensi TapTap")])]),t._v(" "),e("tr",[e("td",{staticClass:"nowrap-table"},[t._v("Hari Kerja")]),t._v(" "),e("td",{staticClass:"bg-light-primary"},[e("s-input",{attrs:{item:{type:"number",validation:[],suffix:"Hari",label:null,nm:!0,ic:"ml-4",api:""}},model:{value:t.modalData.detail.work_day_count,callback:function(a){t.$set(t.modalData.detail,"work_day_count",a)},expression:"modalData.detail.work_day_count"}})],1),t._v(" "),e("td",{staticClass:"text-center nowrap-table"},[t._v(" "+t._s(t.modalData.sync.data_recaps.work_day_count)+" Hari ")])]),t._v(" "),e("tr",[e("td",{staticClass:"nowrap-table"},[t._v("Tidak Masuk")]),t._v(" "),e("td",{staticClass:"bg-light-primary"},[e("s-input",{attrs:{item:{type:"number",validation:[],suffix:"Hari",label:null,nm:!0,ic:"ml-4",api:""}},model:{value:t.modalData.detail.work_day_lost_count,callback:function(a){t.$set(t.modalData.detail,"work_day_lost_count",a)},expression:"modalData.detail.work_day_lost_count"}})],1),t._v(" "),e("td",{staticClass:"text-center nowrap-table"},[t._v(" "+t._s(t.modalData.sync.data_recaps.work_day_lost_count)+" Hari ")])]),t._v(" "),e("tr",[e("td",{staticClass:"nowrap-table"},[t._v("Terlambat")]),t._v(" "),e("td",{staticClass:"bg-light-primary"},[e("s-input",{attrs:{item:{type:"number",validation:[],suffix:"Hari",label:null,nm:!0,ic:"ml-4",api:""}},model:{value:t.modalData.detail.work_day_late_count,callback:function(a){t.$set(t.modalData.detail,"work_day_late_count",a)},expression:"modalData.detail.work_day_late_count"}})],1),t._v(" "),e("td",{staticClass:"text-center nowrap-table"},[t._v(" "+t._s(t.modalData.sync.data_recaps.work_day_late_count)+" Hari ")])]),t._v(" "),e("tr",[e("td",{staticClass:"nowrap-table"},[t._v("Menit Terlambat")]),t._v(" "),e("td",{staticClass:"bg-light-primary"},[e("s-input",{attrs:{item:{type:"number",validation:[],suffix:"Menit",label:null,nm:!0,ic:"ml-4",api:""}},model:{value:t.modalData.detail.work_day_minute_late_count,callback:function(a){t.$set(t.modalData.detail,"work_day_minute_late_count",a)},expression:"modalData.detail.work_day_minute_late_count"}})],1),t._v(" "),e("td",{staticClass:"text-center nowrap-table"},[t._v(" "+t._s(t.modalData.sync.data_recaps.work_day_minute_late_count)+" Menit ")])]),t._v(" "),e("tr",[e("td",{attrs:{colspan:"3"}},[e("a",{staticClass:"btn btn-block btn-light-primary mt-3",on:{click:function(a){return t.copyValue()}}},[e("i",{staticClass:"ri-file-copy-line"}),t._v(" Salin nilai Presensi TapTap ")])])])])]),t._v(" "),e("div",{staticClass:"form-group mb-5 mt-0"},[e("label",[t._v("Deskripsi Rekap Presensi")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.modalData.detail.description,expression:"modalData.detail.description"}],staticClass:"form-control",attrs:{rows:"3",placeholder:"Deskripsi / note Rekap Presensi"},domProps:{value:t.modalData.detail.description},on:{input:function(a){a.target.composing||t.$set(t.modalData.detail,"description",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"mt-5"},[e("button",{staticClass:"btn btn-primary btn-lg btn-block font-size-md",on:{click:function(a){return t.submitData("modal-rincian-bills")}}},[t._v("Perbarui & Simpan")])])])]):t._e()]):t._e()]},proxy:!0}])})},staticRenderFns:[]};var m=e("VU/8")(_,c,!1,function(t){e("xOVP")},"data-v-5cf7fbf2",null);a.default=m.exports},xOVP:function(t,a){}});
//# sourceMappingURL=59.2570432678165ab45c60.js.map