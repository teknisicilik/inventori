webpackJsonp([72],{Utn4:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("Dd8w"),l=e.n(i),s=e("Xxa5"),n=e.n(s),o=e("woOf"),d=e.n(o),r=e("exGp"),c=e.n(r),p={name:"crud-tunjangan-beasiswa-details",data:function(){return{modalData:{},mainKey:0,config:{title:"Data Beasiswa Anak",model_api:null,getter:"custom/tunjangan-beasiswa-details",setter:"tunjangan-beasiswa-details",pk_field:"name",filter_api:{},custom_api:{create:"custom/tunjangan-beasiswa-details"},permission:{create:"create-tunjangan-beasiswa-details",read:"view-tunjangan-beasiswa-details",update:"update-tunjangan-beasiswa-details",delete:"delete-tunjangan-beasiswa-details"},slave:[],fields:[{id:"id",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"updated_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_by",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"created_at",label:"Dibuat",methods:{create:!1,update:!1,filter:!1}},{id:"updated_at",label:"Diperbarui",methods:{list:!1,detail:!1,create:!1,update:!1,filter:!1}},{id:"status_code",data:"status_code",label:"Status",placeholder:null,methods:{list:{order:!0,class:{not_calculated_yet:"badge badge-danger",calculated:"badge badge-primary"},transform:"calculated"},detail:{order:!0,class:{not_calculated_yet:"badge badge-danger",calculated:"badge badge-primary"},transform:"calculated"},create:!1,update:{view_data:"status_code",type:"radio",value:"calculated",option:{list_pointer:{label:"label",code:"code",list:[{label:"Sudah dihitung",code:"calculated"},{label:"Belum dihitung",code:"not_calculated_yet"}]}}},filter:{view_data:"status_code",type:"radio",option:{list_pointer:{label:"label",code:"code",list:[{label:"Sudah dihitung",code:"calculated"},{label:"Belum dihitung",code:"not_calculated_yet"}]}}}}},{id:"employee_id",label:"Nama Tenaga Kerja",methods:{list:{view_data:"rel_employee_id"},create:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}},update:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}},filter:{setter:"employees",getter:"employees",type:"lookup-radio",option:{list_pointer:{label:"fullname",code:"id",display:["nip","fullname"]}}}}},{id:"job_position_id",label:"Jabatan",methods:{list:{view_data:"rel_job_position_id"},create:!1,update:{setter:"job-positions",getter:"job-positions",type:"lookup-radio",option:{list_pointer:{label:"job_position_name",code:"id",display:["job_position_name"]}}},filter:{setter:"job-positions",getter:"job-positions",type:"lookup-radio",option:{list_pointer:{label:"job_position_name",code:"id",display:["job_position_name"]}}}}},{id:"status_employment_id",label:"Status Ketenagakerjaan",methods:{list:{view_data:"rel_status_employment_id",show:!0},create:!1,update:{setter:"custom/master-status-employments",getter:"custom/master-status-employments",type:"lookup-radio",option:{list_pointer:{label:"name",code:"id",display:["name"]},get_param:[{id:"job_position_id"}]}},filter:{setter:"custom/master-status-employments",getter:"custom/master-status-employments",type:"lookup-radio",option:{list_pointer:{label:"name",code:"id",display:["name"]},get_param:[{id:"job_position_id"}]}}}},{id:"penerimaan_value",label:"Penerimaan",methods:{create:!1,update:!1,list:{transform:"money"},detail:{transform:"money"}}},{id:"description",label:"Deskripsi",methods:{create:{type:"textarea"},update:{type:"textarea"}}}]},datasets:{rank:[{label:"Peringkat I",code:1},{label:"Peringkat II",code:2},{label:"Peringkat III",code:3},{label:"Peringkat IV",code:4},{label:"Peringkat V",code:5}],education_id:[]}}},watch:{mainKey:{immediate:!1,deep:!1,handler:function(t){this.$refs["sub-module"].$children[1].getData()}}},methods:{openModal:function(t,a){var e=this;return c()(n.a.mark(function i(){var l,s;return n.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.getDatasets("master-educations",null,null);case 2:return l=i.sent,e.$set(e.datasets,"education_id",l.map(function(t){return{label:t.name,code:t.id}})),i.next=6,e.getDetail("get","custom/tunjangan-beasiswa-details/show",{id:a.rowData.id});case 6:i.t0=i.sent,s={detail:i.t0},e.modalData=d()({},s,a.rowData),e.$nextTick().then(function(a){e.$bvModal.show(t)});case 10:case"end":return i.stop()}},i,e)}))()},getDetail:function(t,a,e){var i=this,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.$_api[t](a,e).then(function(t){return l&&t.data[l]||t.data}).catch(function(t){i.$_alert.error(t)})},copyValue:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.$set(this.modalData,"detail",l()({},this.modalData.detail,this.modalData.sync.data_recaps))},getDatasets:function(t,a){var e=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.$_api.dataset(t,a).then(function(t){return i&&t.data[i]||t.data}).catch(function(t){e.$_alert.error(t)})},submitData:function(){var t=this,a=this.config.getter+"/calculate";this.$_api.post(a,this.modalData.detail).then(function(a){t.$_alert.success(null,"Detail Rincian berhasil diperbarui"),t.$bvModal.hide("modal-rincian-beasiswa"),t.mainKey++}).catch(function(a){t.$_alert.error(a)})}}},u={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("tas-base-crud",{ref:"sub-module",attrs:{config:t.config,"hide-update":"","hide-filter":"","hide-detail":""},scopedSlots:t._u([{key:"list-table-action",fn:function(a){return[e("a",{staticClass:"btn btn-info btn-sm",on:{click:function(e){return t.openModal("modal-rincian-beasiswa",a)}}},[t._v("Lihat Detail")])]}},{key:"list-header",fn:function(){return[t.modalData.detail?e("b-modal",{attrs:{"header-class":"pb-1","no-close-on-backdrop":"",id:"modal-rincian-beasiswa","hide-footer":"",size:"xl"},scopedSlots:t._u([{key:"modal-header",fn:function(){return[e("div",{staticClass:"d-flex justify-content-between flex-fill"},[e("div",{staticClass:"d-flex flex-column flex-fill"},[e("div",{staticClass:"d-flex justify-content-between"},[e("div",{staticClass:"text-center mb-5 flex-fill"},[e("h5",{staticClass:"mb-1 font-weight-bold"},[t._v("Detail "+t._s(t.config.title))]),t._v(" "),e("span",{staticClass:"font-weight-bolder"},[t._v("Periode "+t._s(t._f("parse")(t.modalData.detail.periode_month,"period")))])]),t._v(" "),e("div",[e("i",{staticClass:"ri-close-circle-line text-danger ri-2x pointer",on:{click:function(a){return t.$bvModal.hide("modal-rincian-beasiswa")}}})])]),t._v(" "),e("table",{staticClass:"table no-border mb-0"},[e("tr",[e("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("Tenaga Kerja")]),t._v(" "),e("td",{staticClass:"pt-0 pr-0 nowrap-table"},[t._v(": "+t._s(t.modalData.rel_employee_id))]),t._v(" "),e("td",{}),t._v(" "),e("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("Jabatan")]),t._v(" "),e("td",{staticClass:"pt-0 pr-0 nowrap-table"},[t._v(": "+t._s(t.modalData.detail.rel_job_position_id))])]),t._v(" "),e("tr",[e("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("MPP")]),t._v(" "),e("td",{staticClass:"pt-0 pr-0 nowrap-table"},[t._v(": "+t._s(t._f("parse")(t.modalData.detail.is_mpp,"ynBool")))]),t._v(" "),e("td",{}),t._v(" "),e("td",{staticClass:"pt-0 pl-0 nowrap-table"},[t._v("Status Ketenagakerjaan")]),t._v(" "),e("td",{staticClass:"pt-0 pr-0 nowrap-table"},[t._v(": "+t._s(t.modalData.detail.rel_status_employment_id))])])])])])]},proxy:!0}],null,!1,1940540629)},[t._v(" "),e("div",{staticClass:"tables-responsive"},[e("table",{staticClass:"table table-header-custom v-center"},[e("thead",[e("tr",[e("th",[t._v("Nama Lengkap & Hubungan Keluarga")]),t._v(" "),e("th",{staticClass:"max-w-150px"},[t._v("Pendidikan")]),t._v(" "),e("th",{staticClass:"max-w-150px"},[t._v("Peringkat")]),t._v(" "),e("th",{staticClass:"max-w-150px"},[t._v("Uang Beasiswa")])])]),t._v(" "),e("tbody",[t.modalData.detail.data_tunjangan_beasiswa_components.length?t._l(t.modalData.detail.data_tunjangan_beasiswa_components,function(a,i){return e("tr",{key:i+"-data-employee"},[e("td",{staticClass:"max-w-250px"},[e("label",{staticClass:"checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.active,expression:"e.active"}],attrs:{type:"checkbox","true-value":1,"false-value":0},domProps:{checked:Array.isArray(a.active)?t._i(a.active,null)>-1:t._q(a.active,1)},on:{change:function(e){var i=a.active,l=e.target,s=l.checked?1:0;if(Array.isArray(i)){var n=t._i(i,null);l.checked?n<0&&t.$set(a,"active",i.concat([null])):n>-1&&t.$set(a,"active",i.slice(0,n).concat(i.slice(n+1)))}else t.$set(a,"active",s)}}}),t._v(" "),e("span",{staticClass:"mr-3"}),t._v(" "),e("div",{staticClass:" d-flex justify-content-between align-items-center flex-fill"},[e("div",{staticClass:"text-line-2 max-w-200px"},[t._v(" "+t._s(a.rel_employee_family_id)+" "),e("span",{staticClass:"d-block font-size-sm"},[e("b",[t._v("Status")]),t._v(" : "+t._s(a.rel_family_relationship_id))])])])])]),t._v(" "),a.active?[e("td",{staticClass:"max-w-150px"},[t.datasets.education_id.length?e("s-input",{attrs:{item:{attr:[{clearable:!1}],type:"select",validation:[],placeholder:"Pilih Jenjang Pendidikan",api:"",nm:!0,notAppendToBody:!0,optionList:t.datasets.education_id,ic:"w-100 mt-2"}},model:{value:a.education_id,callback:function(e){t.$set(a,"education_id",e)},expression:"e.education_id"}}):t._e()],1),t._v(" "),e("td",{staticClass:"max-w-150px"},[t.datasets.rank.length?e("s-input",{attrs:{item:{attr:[{clearable:!1}],type:"select",validation:[],placeholder:"Peringkat",api:"",nm:!0,notAppendToBody:!0,optionList:t.datasets.rank,ic:"w-100 mt-2"}},model:{value:a.rank,callback:function(e){t.$set(a,"rank",e)},expression:"e.rank"}}):t._e()],1),t._v(" "),e("td",{staticClass:"max-w-150px"},[e("s-input",{attrs:{item:{type:"number",validation:[],label:null,prefix:"Rp. ",groupClass:"mb-0",ic:"w-100 mr-1",api:"",attr:{precision:2}}},model:{value:a.component_value,callback:function(e){t.$set(a,"component_value",e)},expression:"e.component_value"}})],1)]:e("td",{staticClass:"bg-light-primary",attrs:{colspan:"3"}},[e("p",{staticClass:"mb-0 pl-2"},[t._v("Checklist apabila Anggota Keluarga ini mendapatkan beasiswa")])])],2)}):e("tr",[e("td",{staticClass:"text-center",attrs:{colspan:"4"}},[e("p",{staticClass:"mb-0"},[t._v("Tidak ada Anggota Keluarga yang terdaftar")])])]),t._v(" "),e("tr",[e("th",{staticClass:"text-right text-uppercase",attrs:{colspan:"3"}},[t._v("Jumlah Penerimaan")]),t._v(" "),e("th",[e("div",{staticClass:"d-flex justify-content-between"},[e("span",{},[t._v("Rp.")]),t._v(" "),e("span",{staticClass:"text-right font-weight-bolder"},[t._v(t._s(t._f("parse")(t.modalData.penerimaan_value||0,"number")))])])])])],2)])]),t._v(" "),e("div",{staticClass:"mt-5"},[e("button",{staticClass:"btn btn-primary btn-lg btn-block font-size-md",on:{click:function(a){return t.submitData("modal-rincian-bills")}}},[t._v("Simpan & Tutup Detail")])])]):t._e()]},proxy:!0}])})},staticRenderFns:[]},_=e("VU/8")(p,u,!1,null,null,null);a.default=_.exports}});
//# sourceMappingURL=72.6ef041274e0000e2bb10.js.map